"use strict";(self.webpackChunknpwd_qb_banking=self.webpackChunknpwd_qb_banking||[]).push([[333],{7333:(t,e,r)=>{r.r(e),r.d(e,{default:()=>v});var o=r(2950),n=r.n(o);function a(){}function i(t){return!!(t||"").match(/\d/)}function s(t){return null==t}function u(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function l(t,e){void 0===e&&(e=!0);var r="-"===t[0],o=r&&e,n=(t=t.replace("-","")).split(".");return{beforeDecimal:n[0],afterDecimal:n[1]||"",hasNagation:r,addNegation:o}}function p(t,e,r){for(var o="",n=r?"0":"",a=0;a<=e-1;a++)o+=t[a]||n;return o}function c(t,e){return Array(e+1).join(t)}function f(t,e){if(t.value=t.value,null!==t){if(t.createTextRange){var r=t.createTextRange();return r.move("character",e),r.select(),!0}return t.selectionStart||0===t.selectionStart?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}function h(t,e,r){return Math.min(Math.max(t,e),r)}function m(t){return Math.max(t.selectionStart,t.selectionEnd)}var g={displayType:"input",decimalSeparator:".",thousandsGroupStyle:"thousand",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,allowEmptyFormatting:!1,allowLeadingZeros:!1,isNumericString:!1,type:"text",onValueChange:a,onChange:a,onKeyDown:a,onMouseUp:a,onFocus:a,onBlur:a,isAllowed:function(){return!0}},d=function(t){function e(e){t.call(this,e);var r=e.defaultValue;this.validateProps();var o=this.formatValueProp(r);this.state={value:o,numAsString:this.removeFormatting(o),mounted:!1},this.selectionBeforeInput={selectionStart:0,selectionEnd:0},this.onChange=this.onChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentDidMount=function(){this.setState({mounted:!0})},e.prototype.componentDidUpdate=function(t){this.updateValueIfRequired(t)},e.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout)},e.prototype.updateValueIfRequired=function(t){var e=this,r=e.props,o=e.state,n=e.focusedElm,a=o.value,i=o.numAsString;if(void 0===i&&(i=""),t!==r){this.validateProps();var u=this.formatNumString(i),l=s(r.value)?u:this.formatValueProp(),p=this.removeFormatting(l),c=parseFloat(p),f=parseFloat(i);(isNaN(c)&&isNaN(f)||c===f)&&u===a&&(null!==n||l===a)||this.updateValue({formattedValue:l,numAsString:p,input:n,source:"prop",event:null})}},e.prototype.getFloatString=function(t){void 0===t&&(t="");var e=this.props.decimalScale,r=this.getSeparators().decimalSeparator,o=this.getNumberRegex(!0),n="-"===t[0];n&&(t=t.replace("-","")),r&&0===e&&(t=t.split(r)[0]);var a=(t=(t.match(o)||[]).join("").replace(r,".")).indexOf(".");return-1!==a&&(t=t.substring(0,a)+"."+t.substring(a+1,t.length).replace(new RegExp(u(r),"g"),"")),n&&(t="-"+t),t},e.prototype.getNumberRegex=function(t,e){var r=this.props,o=r.format,n=r.decimalScale,a=r.customNumerals,i=this.getSeparators().decimalSeparator;return new RegExp("[0-9"+(a?a.join(""):"")+"]"+(!i||0===n||e||o?"":"|"+u(i)),t?"g":void 0)},e.prototype.getSeparators=function(){var t=this.props.decimalSeparator,e=this.props,r=e.thousandSeparator,o=e.allowedDecimalSeparators;return!0===r&&(r=","),o||(o=[t,"."]),{decimalSeparator:t,thousandSeparator:r,allowedDecimalSeparators:o}},e.prototype.getMaskAtIndex=function(t){var e=this.props.mask;return void 0===e&&(e=" "),"string"==typeof e?e:e[t]||" "},e.prototype.getValueObject=function(t,e){var r=parseFloat(e);return{formattedValue:t,value:e,floatValue:isNaN(r)?void 0:r}},e.prototype.validateProps=function(){var t=this.props.mask,e=this.getSeparators(),r=e.decimalSeparator,o=e.thousandSeparator;if(r===o)throw new Error("\n          Decimal separator can't be same as thousand separator.\n          thousandSeparator: "+o+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: '+r+" (default value for decimalSeparator is .)\n       ");if(t&&("string"===t?t:t.toString()).match(/\d/g))throw new Error("\n          Mask "+t+" should not contain numeric character;\n        ")},e.prototype.setPatchedCaretPosition=function(t,e,r){f(t,e),this.caretPositionTimeout=setTimeout((function(){t.value===r&&f(t,e)}),0)},e.prototype.correctCaretPosition=function(t,e,r){var o=this.props,n=o.prefix,a=o.suffix,s=o.format;if(""===t)return 0;if(e=h(e,0,t.length),!s){var u="-"===t[0];return h(e,n.length+(u?1:0),t.length-a.length)}if("function"==typeof s)return e;if("#"===s[e]&&i(t[e]))return e;if("#"===s[e-1]&&i(t[e-1]))return e;var l=s.indexOf("#");e=h(e,l,s.lastIndexOf("#")+1);for(var p=s.substring(e,s.length).indexOf("#"),c=e,f=e+(-1===p?0:p);c>l&&("#"!==s[c]||!i(t[c]));)c-=1;return!i(t[f])||"left"===r&&e!==l||e-c<f-e?i(t[c])?c+1:c:f},e.prototype.getCaretPosition=function(t,e,r){var o,n,a=this.props.format,i=this.state.value,s=this.getNumberRegex(!0),u=(t.match(s)||[]).join(""),l=(e.match(s)||[]).join("");for(o=0,n=0;n<r;n++){var p=t[n]||"",c=e[o]||"";if((p.match(s)||p===c)&&("0"!==p||!c.match(s)||"0"===c||u.length===l.length)){for(;p!==e[o]&&o<e.length;)o++;o++}}return"string"!=typeof a||i||(o=e.length),this.correctCaretPosition(e,o)},e.prototype.removePrefixAndSuffix=function(t){var e=this.props,r=e.format,o=e.prefix,n=e.suffix;if(!r&&t){var a="-"===t[0];a&&(t=t.substring(1,t.length));var i=(t=o&&0===t.indexOf(o)?t.substring(o.length,t.length):t).lastIndexOf(n);t=n&&-1!==i&&i===t.length-n.length?t.substring(0,i):t,a&&(t="-"+t)}return t},e.prototype.removePatternFormatting=function(t){for(var e=this.props.format.split("#").filter((function(t){return""!==t})),r=0,o="",n=0,a=e.length;n<=a;n++){var i=e[n]||"",s=n===a?t.length:t.indexOf(i,r);if(-1===s){o=t;break}o+=t.substring(r,s),r=s+i.length}return(o.match(this.getNumberRegex(!0))||[]).join("")},e.prototype.removeFormatting=function(t){var e=this.props,r=e.format,o=e.removeFormatting;return t?(r?t="string"==typeof r?this.removePatternFormatting(t):"function"==typeof o?o(t):(t.match(this.getNumberRegex(!0))||[]).join(""):(t=this.removePrefixAndSuffix(t),t=this.getFloatString(t)),t):t},e.prototype.formatWithPattern=function(t){for(var e=this.props.format,r=0,o=e.split(""),n=0,a=e.length;n<a;n++)"#"===e[n]&&(o[n]=t[r]||this.getMaskAtIndex(r),r+=1);return o.join("")},e.prototype.formatAsNumber=function(t){var e=this.props,r=e.decimalScale,o=e.fixedDecimalScale,n=e.prefix,a=e.suffix,i=e.allowNegative,s=e.thousandsGroupStyle,u=this.getSeparators(),c=u.thousandSeparator,f=u.decimalSeparator,h=-1!==t.indexOf(".")||r&&o,m=l(t,i),g=m.beforeDecimal,d=m.afterDecimal,v=m.addNegation;return void 0!==r&&(d=p(d,r,o)),c&&(g=function(t,e,r){var o=function(t){switch(t){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;default:return/(\d)(?=(\d{3})+(?!\d))/g}}(r),n=t.search(/[1-9]/);return n=-1===n?t.length:n,t.substring(0,n)+t.substring(n,t.length).replace(o,"$1"+e)}(g,c,s)),n&&(g=n+g),a&&(d+=a),v&&(g="-"+g),g+(h&&f||"")+d},e.prototype.formatNumString=function(t){void 0===t&&(t="");var e=this.props,r=e.format,o=e.allowEmptyFormatting,n=e.customNumerals,a=t;if(n&&10===n.length){var i=new RegExp("["+n.join("")+"]","g");a=t.replace(i,(function(t){return n.indexOf(t).toString()}))}return""!==t||o?"-"!==t||r?"string"==typeof r?this.formatWithPattern(a):"function"==typeof r?r(a):this.formatAsNumber(a):"-":""},e.prototype.formatValueProp=function(t){var e=this.props,r=e.format,o=e.decimalScale,n=e.fixedDecimalScale,a=e.allowEmptyFormatting,i=this.props,u=i.value,f=i.isNumericString,h=!(u=s(u)?t:u)&&0!==u;return h&&a&&(u=""),h&&!a?"":("number"==typeof u&&(u=function(t){var e="-"===(t+="")[0]?"-":"";e&&(t=t.substring(1));var r=t.split(/[eE]/g),o=r[0],n=r[1];if(!(n=Number(n)))return e+o;var a=1+n,i=(o=o.replace(".","")).length;return a<0?o="0."+c("0",Math.abs(a))+o:a>=i?o+=c("0",a-i):o=(o.substring(0,a)||"0")+"."+o.substring(a),e+o}(u),f=!0),"Infinity"===u&&f&&(u=""),f&&!r&&"number"==typeof o&&(u=function(t,e,r){if(-1!==["","-"].indexOf(t))return t;var o=-1!==t.indexOf(".")&&e,n=l(t),a=n.beforeDecimal,i=n.afterDecimal,s=n.hasNagation,u=parseFloat("0."+(i||"0")),c=(i.length<=e?"0."+i:u.toFixed(e)).split(".");return(s?"-":"")+a.split("").reverse().reduce((function(t,e,r){return t.length>r?(Number(t[0])+Number(e)).toString()+t.substring(1,t.length):e+t}),c[0])+(o?".":"")+p(c[1]||"",Math.min(e,i.length),r)}(u,o,n)),f?this.formatNumString(u):this.formatInput(u))},e.prototype.formatNegation=function(t){void 0===t&&(t="");var e=this.props.allowNegative,r=new RegExp("(-)"),o=new RegExp("(-)(.)*(-)"),n=r.test(t),a=o.test(t);return t=t.replace(/-/g,""),n&&!a&&e&&(t="-"+t),t},e.prototype.formatInput=function(t){return void 0===t&&(t=""),this.props.format||(t=this.removePrefixAndSuffix(t),t=this.formatNegation(t)),t=this.removeFormatting(t),this.formatNumString(t)},e.prototype.isCharacterAFormat=function(t,e){var r=this.props,o=r.format,n=r.prefix,a=r.suffix,i=r.decimalScale,s=r.fixedDecimalScale,u=this.getSeparators().decimalSeparator;return"string"==typeof o&&"#"!==o[t]||!(o||!(t<n.length||t>=e.length-a.length||i&&s&&e[t]===u))},e.prototype.correctInputValue=function(t,e,r){var o=this,n=this.props,a=n.format,i=n.allowNegative,s=n.prefix,u=n.suffix,p=n.decimalScale,c=this.getSeparators(),f=c.allowedDecimalSeparators,h=c.decimalSeparator,m=this.state.numAsString||"",g=this.selectionBeforeInput,d=g.selectionStart,v=g.selectionEnd,S=function(t,e){for(var r=0,o=0,n=t.length,a=e.length;t[r]===e[r]&&r<n;)r++;for(;t[n-1-o]===e[a-1-o]&&a-o>r&&n-o>r;)o++;return{start:r,end:n-o}}(e,r),y=S.start,x=S.end;if(!a&&y===x&&-1!==f.indexOf(r[d])){var b=0===p?"":h;return r.substr(0,d)+b+r.substr(d+1,r.length)}var w=a?0:s.length,N=e.length-(a?0:u.length);if(r.length>e.length||!r.length||y===x||0===d&&v===e.length||0===y&&x===e.length||d===w&&v===N)return r;var P=e.substr(y,x-y);if([].concat(P).find((function(t,r){return o.isCharacterAFormat(r+y,e)}))){var F=e.substr(y),C={},D=[];[].concat(F).forEach((function(t,r){o.isCharacterAFormat(r+y,e)?C[r]=t:r>P.length-1&&D.push(t)})),Object.keys(C).forEach((function(t){D.length>t?D.splice(t,0,C[t]):D.push(C[t])})),r=e.substr(0,y)+D.join("")}if(!a){var V=this.removeFormatting(r),A=l(V,i),E=A.beforeDecimal,O=A.afterDecimal,R=A.addNegation,j=t<r.indexOf(h)+1;if(V.length<m.length&&j&&""===E&&!parseFloat(O))return R?"-":""}return r},e.prototype.updateValue=function(t){var e=t.formattedValue,r=t.input,o=t.setCaretPosition;void 0===o&&(o=!0);var n=t.source,a=t.event,i=t.numAsString,s=t.caretPos,u=this.props.onValueChange,l=this.state.value;if(r){if(void 0===s&&o){var p=t.inputValue||r.value,c=m(r);r.value=e,s=this.getCaretPosition(p,e,c)}r.value=e,o&&this.setPatchedCaretPosition(r,s,e)}void 0===i&&(i=this.removeFormatting(e)),e!==l&&(this.setState({value:e,numAsString:i}),u(this.getValueObject(e,i),{event:a,source:n}))},e.prototype.onChange=function(t){var e=t.target,r=e.value,o=this.state,n=this.props,a=n.isAllowed,i=o.value||"",s=m(e);r=this.correctInputValue(s,i,r);var u=this.formatInput(r)||"",l=this.removeFormatting(u),p=a(this.getValueObject(u,l));p||(u=i),this.updateValue({formattedValue:u,numAsString:l,inputValue:r,input:e,event:t,source:"event"}),p&&n.onChange(t)},e.prototype.onBlur=function(t){var e=this.props,r=this.state,o=e.format,n=e.onBlur,a=e.allowLeadingZeros,i=r.numAsString,s=r.value;if(this.focusedElm=null,clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout),!o){isNaN(parseFloat(i))&&(i=""),a||(i=function(t){if(!t)return t;var e="-"===t[0];e&&(t=t.substring(1,t.length));var r=t.split("."),o=r[0].replace(/^0+/,"")||"0",n=r[1]||"";return(e?"-":"")+o+(n?"."+n:"")}(i));var u=this.formatNumString(i);if(u!==s)return this.updateValue({formattedValue:u,numAsString:i,input:t.target,setCaretPosition:!1,event:t,source:"event"}),void n(t)}n(t)},e.prototype.onKeyDown=function(t){var e,r=t.target,o=t.key,n=r.selectionStart,a=r.selectionEnd,i=r.value;void 0===i&&(i="");var s=this.props,u=s.decimalScale,l=s.fixedDecimalScale,p=s.prefix,c=s.suffix,f=s.format,h=s.onKeyDown,m=void 0!==u&&l,g=this.getNumberRegex(!1,m),d=new RegExp("-"),v="string"==typeof f;if(this.selectionBeforeInput={selectionStart:n,selectionEnd:a},"ArrowLeft"===o||"Backspace"===o?e=n-1:"ArrowRight"===o?e=n+1:"Delete"===o&&(e=n),void 0!==e&&n===a){var S=e,y=v?f.indexOf("#"):p.length,x=v?f.lastIndexOf("#")+1:i.length-c.length;if("ArrowLeft"===o||"ArrowRight"===o){var b="ArrowLeft"===o?"left":"right";S=this.correctCaretPosition(i,e,b)}else if("Delete"!==o||g.test(i[e])||d.test(i[e])){if("Backspace"===o&&!g.test(i[e]))if(n<=y+1&&"-"===i[0]&&void 0===f){var w=i.substring(1);this.updateValue({formattedValue:w,caretPos:S,input:r,event:t,source:"event"})}else if(!d.test(i[e])){for(;!g.test(i[S-1])&&S>y;)S--;S=this.correctCaretPosition(i,S,"left")}}else for(;!g.test(i[S])&&S<x;)S++;(S!==e||e<y||e>x)&&(t.preventDefault(),this.setPatchedCaretPosition(r,S,i)),t.isUnitTestRun&&this.setPatchedCaretPosition(r,S,i),h(t)}else h(t)},e.prototype.onMouseUp=function(t){var e=t.target,r=e.selectionStart,o=e.selectionEnd,n=e.value;if(void 0===n&&(n=""),r===o){var a=this.correctCaretPosition(n,r);a!==r&&this.setPatchedCaretPosition(e,a,n)}this.props.onMouseUp(t)},e.prototype.onFocus=function(t){var e=this;t.persist(),this.focusedElm=t.target,this.focusTimeout=setTimeout((function(){var r=t.target,o=r.selectionStart,n=r.selectionEnd,a=r.value;void 0===a&&(a="");var i=e.correctCaretPosition(a,o);i===o||0===o&&n===a.length||e.setPatchedCaretPosition(r,i,a),e.props.onFocus(t)}),0)},e.prototype.render=function(){var t=this.props,e=t.type,r=t.displayType,o=t.customInput,a=t.renderText,i=t.getInputRef,s=t.format,u=(t.thousandSeparator,t.decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle,t.decimalScale,t.fixedDecimalScale,t.prefix,t.suffix,t.removeFormatting,t.mask,t.defaultValue,t.isNumericString,t.allowNegative,t.allowEmptyFormatting,t.allowLeadingZeros,t.onValueChange,t.isAllowed,t.customNumerals,t.onChange,t.onKeyDown,t.onMouseUp,t.onFocus,t.onBlur,t.value,function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&-1===e.indexOf(o)&&(r[o]=t[o]);return r}(t,["type","displayType","customInput","renderText","getInputRef","format","thousandSeparator","decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","decimalScale","fixedDecimalScale","prefix","suffix","removeFormatting","mask","defaultValue","isNumericString","allowNegative","allowEmptyFormatting","allowLeadingZeros","onValueChange","isAllowed","customNumerals","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value"])),l=this.state,p=l.value,c=l.mounted&&function(t){return t||"undefined"!=typeof navigator&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}(s)?"numeric":void 0,f=Object.assign({inputMode:c},u,{type:e,value:p,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===r)return a?a(p,u)||null:n().createElement("span",Object.assign({},u,{ref:i}),p);if(o){var h=o;return n().createElement(h,Object.assign({},f,{ref:i}))}return n().createElement("input",Object.assign({},f,{ref:i}))},e}(n().Component);d.defaultProps=g;const v=d}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxHQUFVLGVBQVlFLEVBRTFEbUksRUFBYTVLLE9BQU82SyxPQUFPLENBQUVMLFVBQVdBLEdBQWFOLEVBQVksQ0FDbkUzTCxLQUFNQSxFQUNOeEIsTUFBT0EsRUFDUDBCLFNBQVVVLEtBQUtWLFNBQ2ZDLFVBQVdTLEtBQUtULFVBQ2hCQyxVQUFXUSxLQUFLUixVQUNoQkMsUUFBU08sS0FBS1AsUUFDZEMsT0FBUU0sS0FBS04sU0FHZixHQUFvQixTQUFoQmQsRUFDRixPQUFPaU0sRUFDTEEsRUFBV2pOLEVBQU9tTixJQUFlLEtBRWpDLGtCQUFxQixPQUFRbEssT0FBTzZLLE9BQU8sQ0FBQyxFQUFHWCxFQUFZLENBQUV0SixJQUFLcUosSUFDaEVsTixHQUdDLEdBQUlnTixFQUFhLENBQ3RCLElBQUllLEVBQWNmLEVBQ2xCLE9BQU8sa0JBQXFCZSxFQUFhOUssT0FBTzZLLE9BQU8sQ0FBQyxFQUFHRCxFQUFZLENBQUVoSyxJQUFLcUosSUFDaEYsQ0FFQSxPQUFPLGtCQUFxQixRQUFTakssT0FBTzZLLE9BQU8sQ0FBQyxFQUFHRCxFQUFZLENBQUVoSyxJQUFLcUosSUFDNUUsRUFFT2xMLENBQ1QsQ0F4a0NnQyxDQXdrQzlCLGVBRUZBLEVBQWFqQixhQUFlQSxFQUU1QixTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnB3ZF9xYl9iYW5raW5nLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW51bWJlci1mb3JtYXQvZGlzdC9yZWFjdC1udW1iZXItZm9ybWF0LmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogcmVhY3QtbnVtYmVyLWZvcm1hdCAtIDQuOS4zXG4gKiBBdXRob3IgOiBTdWRoYW5zaHUgWWFkYXZcbiAqIENvcHlyaWdodCAoYykgMjAxNiwgMjAyMiB0byBTdWRoYW5zaHUgWWFkYXYsIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zLXlhZGF2L3JlYWN0LW51bWJlci1mb3JtYXRcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG4vLyAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4vLyBiYXNpYyBub29wIGZ1bmN0aW9uXG5mdW5jdGlvbiBub29wKCkge31cbmZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjaGFySXNOdW1iZXIoY2hhciAgICAgICAgICkge1xuICByZXR1cm4gISEoY2hhciB8fCAnJykubWF0Y2goL1xcZC8pO1xufVxuXG5mdW5jdGlvbiBpc05pbCh2YWwgICAgICkge1xuICByZXR1cm4gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyICAgICAgICApIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLVtcXF0ve30oKSorPy5cXFxcXiR8XS9nLCAnXFxcXCQmJyk7XG59XG5cbmZ1bmN0aW9uIGdldFRob3VzYW5kc0dyb3VwUmVnZXgodGhvdXNhbmRzR3JvdXBTdHlsZSAgICAgICAgKSB7XG4gIHN3aXRjaCAodGhvdXNhbmRzR3JvdXBTdHlsZSkge1xuICAgIGNhc2UgJ2xha2gnOlxuICAgICAgcmV0dXJuIC8oXFxkKz8pKD89KFxcZFxcZCkrKFxcZCkoPyFcXGQpKShcXC5cXGQrKT8vZztcbiAgICBjYXNlICd3YW4nOlxuICAgICAgcmV0dXJuIC8oXFxkKSg/PShcXGR7NH0pKyg/IVxcZCkpL2c7XG4gICAgY2FzZSAndGhvdXNhbmQnOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gLyhcXGQpKD89KFxcZHszfSkrKD8hXFxkKSkvZztcbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRob3VzYW5kU2VwYXJhdG9yKFxuICBzdHIgICAgICAgICxcbiAgdGhvdXNhbmRTZXBhcmF0b3IgICAgICAgICxcbiAgdGhvdXNhbmRzR3JvdXBTdHlsZSAgICAgICAgXG4pIHtcbiAgdmFyIHRob3VzYW5kc0dyb3VwUmVnZXggPSBnZXRUaG91c2FuZHNHcm91cFJlZ2V4KHRob3VzYW5kc0dyb3VwU3R5bGUpO1xuICB2YXIgaW5kZXggPSBzdHIuc2VhcmNoKC9bMS05XS8pO1xuICBpbmRleCA9IGluZGV4ID09PSAtMSA/IHN0ci5sZW5ndGggOiBpbmRleDtcbiAgcmV0dXJuIChcbiAgICBzdHIuc3Vic3RyaW5nKDAsIGluZGV4KSArXG4gICAgc3RyLnN1YnN0cmluZyhpbmRleCwgc3RyLmxlbmd0aCkucmVwbGFjZSh0aG91c2FuZHNHcm91cFJlZ2V4LCAnJDEnICsgdGhvdXNhbmRTZXBhcmF0b3IpXG4gICk7XG59XG5cbi8vc3BpbHQgYSBmbG9hdCBudW1iZXIgaW50byBkaWZmZXJlbnQgcGFydHMgYmVmb3JlRGVjaW1hbCwgYWZ0ZXJEZWNpbWFsLCBhbmQgbmVnYXRpb25cbmZ1bmN0aW9uIHNwbGl0RGVjaW1hbChudW1TdHIgICAgICAgICwgYWxsb3dOZWdhdGl2ZSkge1xuICBpZiAoIGFsbG93TmVnYXRpdmUgPT09IHZvaWQgMCApIGFsbG93TmVnYXRpdmUgICAgICAgICAgPSB0cnVlO1xuXG4gIHZhciBoYXNOYWdhdGlvbiA9IG51bVN0clswXSA9PT0gJy0nO1xuICB2YXIgYWRkTmVnYXRpb24gPSBoYXNOYWdhdGlvbiAmJiBhbGxvd05lZ2F0aXZlO1xuICBudW1TdHIgPSBudW1TdHIucmVwbGFjZSgnLScsICcnKTtcblxuICB2YXIgcGFydHMgPSBudW1TdHIuc3BsaXQoJy4nKTtcbiAgdmFyIGJlZm9yZURlY2ltYWwgPSBwYXJ0c1swXTtcbiAgdmFyIGFmdGVyRGVjaW1hbCA9IHBhcnRzWzFdIHx8ICcnO1xuXG4gIHJldHVybiB7XG4gICAgYmVmb3JlRGVjaW1hbDogYmVmb3JlRGVjaW1hbCxcbiAgICBhZnRlckRlY2ltYWw6IGFmdGVyRGVjaW1hbCxcbiAgICBoYXNOYWdhdGlvbjogaGFzTmFnYXRpb24sXG4gICAgYWRkTmVnYXRpb246IGFkZE5lZ2F0aW9uLFxuICB9O1xufVxuXG5mdW5jdGlvbiBmaXhMZWFkaW5nWmVybyhudW1TdHIgICAgICAgICApIHtcbiAgaWYgKCFudW1TdHIpIHsgcmV0dXJuIG51bVN0cjsgfVxuICB2YXIgaXNOZWdhdGl2ZSA9IG51bVN0clswXSA9PT0gJy0nO1xuICBpZiAoaXNOZWdhdGl2ZSkgeyBudW1TdHIgPSBudW1TdHIuc3Vic3RyaW5nKDEsIG51bVN0ci5sZW5ndGgpOyB9XG4gIHZhciBwYXJ0cyA9IG51bVN0ci5zcGxpdCgnLicpO1xuICB2YXIgYmVmb3JlRGVjaW1hbCA9IHBhcnRzWzBdLnJlcGxhY2UoL14wKy8sICcnKSB8fCAnMCc7XG4gIHZhciBhZnRlckRlY2ltYWwgPSBwYXJ0c1sxXSB8fCAnJztcblxuICByZXR1cm4gKFwiXCIgKyAoaXNOZWdhdGl2ZSA/ICctJyA6ICcnKSArIGJlZm9yZURlY2ltYWwgKyAoYWZ0ZXJEZWNpbWFsID8gKFwiLlwiICsgYWZ0ZXJEZWNpbWFsKSA6ICcnKSk7XG59XG5cbi8qKlxuICogbGltaXQgZGVjaW1hbCBudW1iZXJzIHRvIGdpdmVuIHNjYWxlXG4gKiBOb3QgdXNlZCAuZml4ZWRUbyBiZWNhdXNlIHRoYXQgd2lsbCBicmVhayB3aXRoIGJpZyBudW1iZXJzXG4gKi9cbmZ1bmN0aW9uIGxpbWl0VG9TY2FsZShudW1TdHIgICAgICAgICwgc2NhbGUgICAgICAgICwgZml4ZWREZWNpbWFsU2NhbGUgICAgICAgICApIHtcbiAgdmFyIHN0ciA9ICcnO1xuICB2YXIgZmlsbGVyID0gZml4ZWREZWNpbWFsU2NhbGUgPyAnMCcgOiAnJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPD0gc2NhbGUgLSAxOyBpKyspIHtcbiAgICBzdHIgKz0gbnVtU3RyW2ldIHx8IGZpbGxlcjtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuXG5mdW5jdGlvbiByZXBlYXQoc3RyLCBjb3VudCkge1xuICByZXR1cm4gQXJyYXkoY291bnQgKyAxKS5qb2luKHN0cik7XG59XG5cbmZ1bmN0aW9uIHRvTnVtZXJpY1N0cmluZyhudW0pIHtcbiAgbnVtICs9ICcnOyAvLyB0eXBlY2FzdCBudW1iZXIgdG8gc3RyaW5nXG5cbiAgLy8gc3RvcmUgdGhlIHNpZ24gYW5kIHJlbW92ZSBpdCBmcm9tIHRoZSBudW1iZXIuXG4gIHZhciBzaWduID0gbnVtWzBdID09PSAnLScgPyAnLScgOiAnJztcbiAgaWYgKHNpZ24pIHsgbnVtID0gbnVtLnN1YnN0cmluZygxKTsgfVxuXG4gIC8vIHNwbGl0IHRoZSBudW1iZXIgaW50byBjb2ZmaWNpZW50IGFuZCBleHBvbmVudFxuICB2YXIgcmVmID0gbnVtLnNwbGl0KC9bZUVdL2cpO1xuICB2YXIgY29lZmZpY2llbnQgPSByZWZbMF07XG4gIHZhciBleHBvbmVudCA9IHJlZlsxXTtcblxuICAvLyBjb3ZlcnQgZXhwb25lbnQgdG8gbnVtYmVyO1xuICBleHBvbmVudCA9IE51bWJlcihleHBvbmVudCk7XG5cbiAgLy8gaWYgdGhlcmUgaXMgbm8gZXhwb25lbnQgcGFydCBvciBpdHMgMCwgcmV0dXJuIHRoZSBjb2ZmaWVjaWVudCB3aXRoIHNpZ25cbiAgaWYgKCFleHBvbmVudCkgeyByZXR1cm4gc2lnbiArIGNvZWZmaWNpZW50OyB9XG5cbiAgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudC5yZXBsYWNlKCcuJywgJycpO1xuXG4gIC8qKlxuICAgKiBmb3Igc2NpZW50aWZpYyBub3RhdGlvbiB0aGUgY3VycmVudCBkZWNpbWFsIGluZGV4IHdpbGwgYmUgYWZ0ZXIgZmlyc3QgbnVtYmVyIChpbmRleCAwKVxuICAgKiBTbyBlZmZlY3RpdmUgZGVjaW1hbCBpbmRleCB3aWxsIGFsd2F5cyBiZSAxICsgZXhwb25lbnQgdmFsdWVcbiAgICovXG4gIHZhciBkZWNpbWFsSW5kZXggPSAxICsgZXhwb25lbnQ7XG5cbiAgdmFyIGNvZmZpZWNpZW50TG4gPSBjb2VmZmljaWVudC5sZW5ndGg7XG5cbiAgaWYgKGRlY2ltYWxJbmRleCA8IDApIHtcbiAgICAvLyBpZiBkZWNpbWFsIGluZGV4IGlzIGxlc3MgdGhlbiAwIGFkZCBwcmVjZWRpbmcgMHNcbiAgICAvLyBhZGQgMSBhcyBqb2luIHdpbGwgaGF2ZVxuICAgIGNvZWZmaWNpZW50ID0gJzAuJyArIHJlcGVhdCgnMCcsIE1hdGguYWJzKGRlY2ltYWxJbmRleCkpICsgY29lZmZpY2llbnQ7XG4gIH0gZWxzZSBpZiAoZGVjaW1hbEluZGV4ID49IGNvZmZpZWNpZW50TG4pIHtcbiAgICAvLyBpZiBkZWNpbWFsIGluZGV4IGlzIGxlc3MgdGhlbiAwIGFkZCBsZWFkaW5nIDBzXG4gICAgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudCArIHJlcGVhdCgnMCcsIGRlY2ltYWxJbmRleCAtIGNvZmZpZWNpZW50TG4pO1xuICB9IGVsc2Uge1xuICAgIC8vIGVsc2UgYWRkIGRlY2ltYWwgcG9pbnQgYXQgcHJvcGVyIGluZGV4XG4gICAgY29lZmZpY2llbnQgPVxuICAgICAgKGNvZWZmaWNpZW50LnN1YnN0cmluZygwLCBkZWNpbWFsSW5kZXgpIHx8ICcwJykgKyAnLicgKyBjb2VmZmljaWVudC5zdWJzdHJpbmcoZGVjaW1hbEluZGV4KTtcbiAgfVxuXG4gIHJldHVybiBzaWduICsgY29lZmZpY2llbnQ7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgcmVxdWlyZWQgdG8gcm91bmQgcHJvcCB2YWx1ZSB0byBnaXZlbiBzY2FsZS5cbiAqIE5vdCB1c2VkIC5yb3VuZCBvciAuZml4ZWRUbyBiZWNhdXNlIHRoYXQgd2lsbCBicmVhayB3aXRoIGJpZyBudW1iZXJzXG4gKi9cbmZ1bmN0aW9uIHJvdW5kVG9QcmVjaXNpb24obnVtU3RyICAgICAgICAsIHNjYWxlICAgICAgICAsIGZpeGVkRGVjaW1hbFNjYWxlICAgICAgICAgKSB7XG4gIC8vaWYgbnVtYmVyIGlzIGVtcHR5IGRvbid0IGRvIGFueXRoaW5nIHJldHVybiBlbXB0eSBzdHJpbmdcbiAgaWYgKFsnJywgJy0nXS5pbmRleE9mKG51bVN0cikgIT09IC0xKSB7IHJldHVybiBudW1TdHI7IH1cblxuICB2YXIgc2hvdWRIYXZlRGVjaW1hbFNlcGFyYXRvciA9IG51bVN0ci5pbmRleE9mKCcuJykgIT09IC0xICYmIHNjYWxlO1xuICB2YXIgcmVmID0gc3BsaXREZWNpbWFsKG51bVN0cik7XG4gIHZhciBiZWZvcmVEZWNpbWFsID0gcmVmLmJlZm9yZURlY2ltYWw7XG4gIHZhciBhZnRlckRlY2ltYWwgPSByZWYuYWZ0ZXJEZWNpbWFsO1xuICB2YXIgaGFzTmFnYXRpb24gPSByZWYuaGFzTmFnYXRpb247XG4gIHZhciBmbG9hdFZhbHVlID0gcGFyc2VGbG9hdCgoXCIwLlwiICsgKGFmdGVyRGVjaW1hbCB8fCAnMCcpKSk7XG4gIHZhciBmbG9hdFZhbHVlU3RyID1cbiAgICBhZnRlckRlY2ltYWwubGVuZ3RoIDw9IHNjYWxlID8gKFwiMC5cIiArIGFmdGVyRGVjaW1hbCkgOiBmbG9hdFZhbHVlLnRvRml4ZWQoc2NhbGUpO1xuICB2YXIgcm91bmRlZERlY2ltYWxQYXJ0cyA9IGZsb2F0VmFsdWVTdHIuc3BsaXQoJy4nKTtcbiAgdmFyIGludFBhcnQgPSBiZWZvcmVEZWNpbWFsXG4gICAgLnNwbGl0KCcnKVxuICAgIC5yZXZlcnNlKClcbiAgICAucmVkdWNlKGZ1bmN0aW9uIChyb3VuZGVkU3RyLCBjdXJyZW50LCBpZHgpIHtcbiAgICAgIGlmIChyb3VuZGVkU3RyLmxlbmd0aCA+IGlkeCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIChOdW1iZXIocm91bmRlZFN0clswXSkgKyBOdW1iZXIoY3VycmVudCkpLnRvU3RyaW5nKCkgK1xuICAgICAgICAgIHJvdW5kZWRTdHIuc3Vic3RyaW5nKDEsIHJvdW5kZWRTdHIubGVuZ3RoKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJlbnQgKyByb3VuZGVkU3RyO1xuICAgIH0sIHJvdW5kZWREZWNpbWFsUGFydHNbMF0pO1xuXG4gIHZhciBkZWNpbWFsUGFydCA9IGxpbWl0VG9TY2FsZShcbiAgICByb3VuZGVkRGVjaW1hbFBhcnRzWzFdIHx8ICcnLFxuICAgIE1hdGgubWluKHNjYWxlLCBhZnRlckRlY2ltYWwubGVuZ3RoKSxcbiAgICBmaXhlZERlY2ltYWxTY2FsZVxuICApO1xuICB2YXIgbmVnYXRpb24gPSBoYXNOYWdhdGlvbiA/ICctJyA6ICcnO1xuICB2YXIgZGVjaW1hbFNlcGFyYXRvciA9IHNob3VkSGF2ZURlY2ltYWxTZXBhcmF0b3IgPyAnLicgOiAnJztcbiAgcmV0dXJuIChcIlwiICsgbmVnYXRpb24gKyBpbnRQYXJ0ICsgZGVjaW1hbFNlcGFyYXRvciArIGRlY2ltYWxQYXJ0KTtcbn1cblxuLyoqIHNldCB0aGUgY2FyZXQgcG9zaXRvbiBpbiBhbiBpbnB1dCBmaWVsZCAqKi9cbmZ1bmN0aW9uIHNldENhcmV0UG9zaXRpb24oZWwgICAgICAgICAgICAgICAgICAsIGNhcmV0UG9zICAgICAgICApIHtcbiAgZWwudmFsdWUgPSBlbC52YWx1ZTtcbiAgLy8gXiB0aGlzIGlzIHVzZWQgdG8gbm90IG9ubHkgZ2V0ICdmb2N1cycsIGJ1dFxuICAvLyB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgaGF2ZSBpdCBldmVyeXRoaW5nIC1zZWxlY3RlZC1cbiAgLy8gKGl0IGNhdXNlcyBhbiBpc3N1ZSBpbiBjaHJvbWUsIGFuZCBoYXZpbmcgaXQgZG9lc24ndCBodXJ0IGFueSBvdGhlciBicm93c2VyKVxuICBpZiAoZWwgIT09IG51bGwpIHtcbiAgICBpZiAoZWwuY3JlYXRlVGV4dFJhbmdlKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBlbC5jcmVhdGVUZXh0UmFuZ2UoKTtcbiAgICAgIHJhbmdlLm1vdmUoJ2NoYXJhY3RlcicsIGNhcmV0UG9zKTtcbiAgICAgIHJhbmdlLnNlbGVjdCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIChlbC5zZWxlY3Rpb25TdGFydCA9PT0gMCBhZGRlZCBmb3IgRmlyZWZveCBidWcpXG4gICAgaWYgKGVsLnNlbGVjdGlvblN0YXJ0IHx8IGVsLnNlbGVjdGlvblN0YXJ0ID09PSAwKSB7XG4gICAgICBlbC5mb2N1cygpO1xuICAgICAgZWwuc2V0U2VsZWN0aW9uUmFuZ2UoY2FyZXRQb3MsIGNhcmV0UG9zKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIGZhaWwgY2l0eSwgZm9ydHVuYXRlbHkgdGhpcyBuZXZlciBoYXBwZW5zIChhcyBmYXIgYXMgSSd2ZSB0ZXN0ZWQpIDopXG4gICAgZWwuZm9jdXMoKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gIEdpdmVuIHByZXZpb3VzIHZhbHVlIGFuZCBuZXdWYWx1ZSBpdCByZXR1cm5zIHRoZSBpbmRleFxuICBzdGFydCAtIGVuZCB0byB3aGljaCB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLlxuICBUaGlzIGZ1bmN0aW9uIG1ha2VzIGFzc3VtcHRpb24gYWJvdXQgb25seSBjb25zZWN1dGl2ZVxuICBjaGFyYWN0ZXJzIGFyZSBjaGFuZ2VkIHdoaWNoIGlzIGNvcnJlY3QgYXNzdW1wdGlvbiBmb3IgY2FyZXQgaW5wdXQuXG4qL1xuZnVuY3Rpb24gZmluZENoYW5nZWRJbmRleChwcmV2VmFsdWUgICAgICAgICwgbmV3VmFsdWUgICAgICAgICkge1xuICB2YXIgaSA9IDAsXG4gICAgaiA9IDA7XG4gIHZhciBwcmV2TGVuZ3RoID0gcHJldlZhbHVlLmxlbmd0aDtcbiAgdmFyIG5ld0xlbmd0aCA9IG5ld1ZhbHVlLmxlbmd0aDtcbiAgd2hpbGUgKHByZXZWYWx1ZVtpXSA9PT0gbmV3VmFsdWVbaV0gJiYgaSA8IHByZXZMZW5ndGgpIHsgaSsrOyB9XG5cbiAgLy9jaGVjayB3aGF0IGhhcyBiZWVuIGNoYW5nZWQgZnJvbSBsYXN0XG4gIHdoaWxlIChcbiAgICBwcmV2VmFsdWVbcHJldkxlbmd0aCAtIDEgLSBqXSA9PT0gbmV3VmFsdWVbbmV3TGVuZ3RoIC0gMSAtIGpdICYmXG4gICAgbmV3TGVuZ3RoIC0gaiA+IGkgJiZcbiAgICBwcmV2TGVuZ3RoIC0gaiA+IGlcbiAgKSB7XG4gICAgaisrO1xuICB9XG5cbiAgcmV0dXJuIHsgc3RhcnQ6IGksIGVuZDogcHJldkxlbmd0aCAtIGogfTtcbn1cblxuLypcbiAgUmV0dXJucyBhIG51bWJlciB3aG9zZSB2YWx1ZSBpcyBsaW1pdGVkIHRvIHRoZSBnaXZlbiByYW5nZVxuKi9cbmZ1bmN0aW9uIGNsYW1wKG51bSAgICAgICAgLCBtaW4gICAgICAgICwgbWF4ICAgICAgICApIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG51bSwgbWluKSwgbWF4KTtcbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudENhcmV0UG9zaXRpb24oZWwgICAgICAgICAgICAgICAgICApIHtcbiAgLypNYXggb2Ygc2VsZWN0aW9uU3RhcnQgYW5kIHNlbGVjdGlvbkVuZCBpcyB0YWtlbiBmb3IgdGhlIHBhdGNoIG9mIHBpeGVsIGFuZCBvdGhlciBtb2JpbGUgZGV2aWNlIGNhcmV0IGJ1ZyovXG4gIHJldHVybiBNYXRoLm1heChlbC5zZWxlY3Rpb25TdGFydCwgZWwuc2VsZWN0aW9uRW5kKTtcbn1cblxuZnVuY3Rpb24gYWRkSW5wdXRNb2RlKGZvcm1hdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gIHJldHVybiAoXG4gICAgZm9ybWF0IHx8XG4gICAgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAhKG5hdmlnYXRvci5wbGF0Zm9ybSAmJiAvaVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSkpXG4gICk7XG59XG5cbi8vICAgICBcbmZ1bmN0aW9uIG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIChvYmosIGV4Y2x1ZGUpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBrIGluIG9iaikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGspICYmIGV4Y2x1ZGUuaW5kZXhPZihrKSA9PT0gLTEpIHRhcmdldFtrXSA9IG9ialtrXTsgcmV0dXJuIHRhcmdldDsgfVxuXG52YXIgZGVmYXVsdFByb3BzID0ge1xuICBkaXNwbGF5VHlwZTogJ2lucHV0JyxcbiAgZGVjaW1hbFNlcGFyYXRvcjogJy4nLFxuICB0aG91c2FuZHNHcm91cFN0eWxlOiAndGhvdXNhbmQnLFxuICBmaXhlZERlY2ltYWxTY2FsZTogZmFsc2UsXG4gIHByZWZpeDogJycsXG4gIHN1ZmZpeDogJycsXG4gIGFsbG93TmVnYXRpdmU6IHRydWUsXG4gIGFsbG93RW1wdHlGb3JtYXR0aW5nOiBmYWxzZSxcbiAgYWxsb3dMZWFkaW5nWmVyb3M6IGZhbHNlLFxuICBpc051bWVyaWNTdHJpbmc6IGZhbHNlLFxuICB0eXBlOiAndGV4dCcsXG4gIG9uVmFsdWVDaGFuZ2U6IG5vb3AsXG4gIG9uQ2hhbmdlOiBub29wLFxuICBvbktleURvd246IG5vb3AsXG4gIG9uTW91c2VVcDogbm9vcCxcbiAgb25Gb2N1czogbm9vcCxcbiAgb25CbHVyOiBub29wLFxuICBpc0FsbG93ZWQ6IHJldHVyblRydWUsXG59O1xudmFyIE51bWJlckZvcm1hdCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKHN1cGVyY2xhc3MpIHtcbiAgZnVuY3Rpb24gTnVtYmVyRm9ybWF0KHByb3BzICAgICAgICApIHtcbiAgICBzdXBlcmNsYXNzLmNhbGwodGhpcywgcHJvcHMpO1xuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG5cbiAgICAvL3ZhbGlkYXRlIHByb3BzXG4gICAgdGhpcy52YWxpZGF0ZVByb3BzKCk7XG5cbiAgICB2YXIgZm9ybWF0dGVkVmFsdWUgPSB0aGlzLmZvcm1hdFZhbHVlUHJvcChkZWZhdWx0VmFsdWUpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHZhbHVlOiBmb3JtYXR0ZWRWYWx1ZSxcbiAgICAgIG51bUFzU3RyaW5nOiB0aGlzLnJlbW92ZUZvcm1hdHRpbmcoZm9ybWF0dGVkVmFsdWUpLFxuICAgICAgbW91bnRlZDogZmFsc2UsXG4gICAgfTtcblxuICAgIHRoaXMuc2VsZWN0aW9uQmVmb3JlSW5wdXQgPSB7XG4gICAgICBzZWxlY3Rpb25TdGFydDogMCxcbiAgICAgIHNlbGVjdGlvbkVuZDogMCxcbiAgICB9O1xuXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uS2V5RG93biA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbk1vdXNlVXAgPSB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Gb2N1cyA9IHRoaXMub25Gb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25CbHVyID0gdGhpcy5vbkJsdXIuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGlmICggc3VwZXJjbGFzcyApIE51bWJlckZvcm1hdC5fX3Byb3RvX18gPSBzdXBlcmNsYXNzO1xuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggc3VwZXJjbGFzcyAmJiBzdXBlcmNsYXNzLnByb3RvdHlwZSApO1xuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTnVtYmVyRm9ybWF0O1xuXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgLy8gc2V0IG1vdW50ZWQgc3RhdGVcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvbm8tZGlkLW1vdW50LXNldC1zdGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgbW91bnRlZDogdHJ1ZSxcbiAgICB9KTtcbiAgfTtcblxuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzICAgICAgICApIHtcbiAgICB0aGlzLnVwZGF0ZVZhbHVlSWZSZXF1aXJlZChwcmV2UHJvcHMpO1xuICB9O1xuXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuZm9jdXNUaW1lb3V0KTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jYXJldFBvc2l0aW9uVGltZW91dCk7XG4gIH07XG5cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS51cGRhdGVWYWx1ZUlmUmVxdWlyZWQgPSBmdW5jdGlvbiB1cGRhdGVWYWx1ZUlmUmVxdWlyZWQgKHByZXZQcm9wcyAgICAgICAgKSB7XG4gICAgdmFyIHJlZiA9IHRoaXM7XG4gICAgdmFyIHByb3BzID0gcmVmLnByb3BzO1xuICAgIHZhciBzdGF0ZSA9IHJlZi5zdGF0ZTtcbiAgICB2YXIgZm9jdXNlZEVsbSA9IHJlZi5mb2N1c2VkRWxtO1xuICAgIHZhciBzdGF0ZVZhbHVlID0gc3RhdGUudmFsdWU7XG4gICAgdmFyIGxhc3ROdW1TdHIgPSBzdGF0ZS5udW1Bc1N0cmluZzsgaWYgKCBsYXN0TnVtU3RyID09PSB2b2lkIDAgKSBsYXN0TnVtU3RyID0gJyc7XG5cbiAgICAvLyBJZiBvbmx5IHN0YXRlIGNoYW5nZWQgbm8gbmVlZCB0byBkbyBhbnkgdGhpbmdcbiAgICBpZiAocHJldlByb3BzICE9PSBwcm9wcykge1xuICAgICAgLy92YWxpZGF0ZSBwcm9wc1xuICAgICAgdGhpcy52YWxpZGF0ZVByb3BzKCk7XG5cbiAgICAgIHZhciBsYXN0VmFsdWVXaXRoTmV3Rm9ybWF0ID0gdGhpcy5mb3JtYXROdW1TdHJpbmcobGFzdE51bVN0cik7XG5cbiAgICAgIHZhciBmb3JtYXR0ZWRWYWx1ZSA9IGlzTmlsKHByb3BzLnZhbHVlKSA/IGxhc3RWYWx1ZVdpdGhOZXdGb3JtYXQgOiB0aGlzLmZvcm1hdFZhbHVlUHJvcCgpO1xuICAgICAgdmFyIG51bUFzU3RyaW5nID0gdGhpcy5yZW1vdmVGb3JtYXR0aW5nKGZvcm1hdHRlZFZhbHVlKTtcblxuICAgICAgdmFyIGZsb2F0VmFsdWUgPSBwYXJzZUZsb2F0KG51bUFzU3RyaW5nKTtcbiAgICAgIHZhciBsYXN0RmxvYXRWYWx1ZSA9IHBhcnNlRmxvYXQobGFzdE51bVN0cik7XG5cbiAgICAgIGlmIChcbiAgICAgICAgLy93aGlsZSB0eXBpbmcgc2V0IHN0YXRlIG9ubHkgd2hlbiBmbG9hdCB2YWx1ZSBjaGFuZ2VzXG4gICAgICAgICgoIWlzTmFOKGZsb2F0VmFsdWUpIHx8ICFpc05hTihsYXN0RmxvYXRWYWx1ZSkpICYmIGZsb2F0VmFsdWUgIT09IGxhc3RGbG9hdFZhbHVlKSB8fFxuICAgICAgICAvL2NhbiBhbHNvIHNldCBzdGF0ZSB3aGVuIGZsb2F0IHZhbHVlIGlzIHNhbWUgYW5kIHRoZSBmb3JtYXQgcHJvcHMgY2hhbmdlc1xuICAgICAgICBsYXN0VmFsdWVXaXRoTmV3Rm9ybWF0ICE9PSBzdGF0ZVZhbHVlIHx8XG4gICAgICAgIC8vc2V0IHN0YXRlIGFsd2F5cyB3aGVuIG5vdCBpbiBmb2N1cyBhbmQgZm9ybWF0dGVkIHZhbHVlIGlzIGNoYW5nZWRcbiAgICAgICAgKGZvY3VzZWRFbG0gPT09IG51bGwgJiYgZm9ybWF0dGVkVmFsdWUgIT09IHN0YXRlVmFsdWUpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh7XG4gICAgICAgICAgZm9ybWF0dGVkVmFsdWU6IGZvcm1hdHRlZFZhbHVlLFxuICAgICAgICAgIG51bUFzU3RyaW5nOiBudW1Bc1N0cmluZyxcbiAgICAgICAgICBpbnB1dDogZm9jdXNlZEVsbSxcbiAgICAgICAgICBzb3VyY2U6ICdwcm9wJyxcbiAgICAgICAgICBldmVudDogbnVsbCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKiBNaXNjIG1ldGhvZHMgKiovXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUuZ2V0RmxvYXRTdHJpbmcgPSBmdW5jdGlvbiBnZXRGbG9hdFN0cmluZyAobnVtKSB7XG4gICAgaWYgKCBudW0gPT09IHZvaWQgMCApIG51bSAgICAgICAgID0gJyc7XG5cbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZGVjaW1hbFNjYWxlID0gcmVmLmRlY2ltYWxTY2FsZTtcbiAgICB2YXIgcmVmJDEgPSB0aGlzLmdldFNlcGFyYXRvcnMoKTtcbiAgICB2YXIgZGVjaW1hbFNlcGFyYXRvciA9IHJlZiQxLmRlY2ltYWxTZXBhcmF0b3I7XG4gICAgdmFyIG51bVJlZ2V4ID0gdGhpcy5nZXROdW1iZXJSZWdleCh0cnVlKTtcblxuICAgIC8vcmVtb3ZlIG5lZ2F0aW9uIGZvciByZWdleCBjaGVja1xuICAgIHZhciBoYXNOZWdhdGlvbiA9IG51bVswXSA9PT0gJy0nO1xuICAgIGlmIChoYXNOZWdhdGlvbikgeyBudW0gPSBudW0ucmVwbGFjZSgnLScsICcnKTsgfVxuXG4gICAgLy9pZiBkZWNpbWFsIHNjYWxlIGlzIHplcm8gcmVtb3ZlIGRlY2ltYWwgYW5kIG51bWJlciBhZnRlciBkZWNpbWFsU2VwYXJhdG9yXG4gICAgaWYgKGRlY2ltYWxTZXBhcmF0b3IgJiYgZGVjaW1hbFNjYWxlID09PSAwKSB7XG4gICAgICBudW0gPSBudW0uc3BsaXQoZGVjaW1hbFNlcGFyYXRvcilbMF07XG4gICAgfVxuXG4gICAgbnVtID0gKG51bS5tYXRjaChudW1SZWdleCkgfHwgW10pLmpvaW4oJycpLnJlcGxhY2UoZGVjaW1hbFNlcGFyYXRvciwgJy4nKTtcblxuICAgIC8vcmVtb3ZlIGV4dHJhIGRlY2ltYWxzXG4gICAgdmFyIGZpcnN0RGVjaW1hbEluZGV4ID0gbnVtLmluZGV4T2YoJy4nKTtcblxuICAgIGlmIChmaXJzdERlY2ltYWxJbmRleCAhPT0gLTEpIHtcbiAgICAgIG51bSA9IChudW0uc3Vic3RyaW5nKDAsIGZpcnN0RGVjaW1hbEluZGV4KSkgKyBcIi5cIiArIChudW1cbiAgICAgICAgLnN1YnN0cmluZyhmaXJzdERlY2ltYWxJbmRleCArIDEsIG51bS5sZW5ndGgpXG4gICAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlUmVnRXhwKGRlY2ltYWxTZXBhcmF0b3IpLCAnZycpLCAnJykpO1xuICAgIH1cblxuICAgIC8vYWRkIG5lZ2F0aW9uIGJhY2tcbiAgICBpZiAoaGFzTmVnYXRpb24pIHsgbnVtID0gJy0nICsgbnVtOyB9XG5cbiAgICByZXR1cm4gbnVtO1xuICB9O1xuXG4gIC8vcmV0dXJuZWQgcmVnZXggYXNzdW1lcyBkZWNpbWFsU2VwYXJhdG9yIGlzIGFzIHBlciBwcm9wXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUuZ2V0TnVtYmVyUmVnZXggPSBmdW5jdGlvbiBnZXROdW1iZXJSZWdleCAoZyAgICAgICAgICwgaWdub3JlRGVjaW1hbFNlcGFyYXRvciAgICAgICAgICApIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZm9ybWF0ID0gcmVmLmZvcm1hdDtcbiAgICB2YXIgZGVjaW1hbFNjYWxlID0gcmVmLmRlY2ltYWxTY2FsZTtcbiAgICB2YXIgY3VzdG9tTnVtZXJhbHMgPSByZWYuY3VzdG9tTnVtZXJhbHM7XG4gICAgdmFyIHJlZiQxID0gdGhpcy5nZXRTZXBhcmF0b3JzKCk7XG4gICAgdmFyIGRlY2ltYWxTZXBhcmF0b3IgPSByZWYkMS5kZWNpbWFsU2VwYXJhdG9yO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKFxuICAgICAgJ1swLTknICtcbiAgICAgICAgKGN1c3RvbU51bWVyYWxzID8gY3VzdG9tTnVtZXJhbHMuam9pbignJykgOiAnJykgK1xuICAgICAgICAnXScgK1xuICAgICAgICAoZGVjaW1hbFNlcGFyYXRvciAmJiBkZWNpbWFsU2NhbGUgIT09IDAgJiYgIWlnbm9yZURlY2ltYWxTZXBhcmF0b3IgJiYgIWZvcm1hdFxuICAgICAgICAgID8gJ3wnICsgZXNjYXBlUmVnRXhwKGRlY2ltYWxTZXBhcmF0b3IpXG4gICAgICAgICAgOiAnJyksXG4gICAgICBnID8gJ2cnIDogdW5kZWZpbmVkXG4gICAgKTtcbiAgfTtcblxuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmdldFNlcGFyYXRvcnMgPSBmdW5jdGlvbiBnZXRTZXBhcmF0b3JzICgpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZGVjaW1hbFNlcGFyYXRvciA9IHJlZi5kZWNpbWFsU2VwYXJhdG9yO1xuICAgIHZhciByZWYkMSA9IHRoaXMucHJvcHM7XG4gICAgdmFyIHRob3VzYW5kU2VwYXJhdG9yID0gcmVmJDEudGhvdXNhbmRTZXBhcmF0b3I7XG4gICAgdmFyIGFsbG93ZWREZWNpbWFsU2VwYXJhdG9ycyA9IHJlZiQxLmFsbG93ZWREZWNpbWFsU2VwYXJhdG9ycztcblxuICAgIGlmICh0aG91c2FuZFNlcGFyYXRvciA9PT0gdHJ1ZSkge1xuICAgICAgdGhvdXNhbmRTZXBhcmF0b3IgPSAnLCc7XG4gICAgfVxuICAgIGlmICghYWxsb3dlZERlY2ltYWxTZXBhcmF0b3JzKSB7XG4gICAgICBhbGxvd2VkRGVjaW1hbFNlcGFyYXRvcnMgPSBbZGVjaW1hbFNlcGFyYXRvciwgJy4nXTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGVjaW1hbFNlcGFyYXRvcjogZGVjaW1hbFNlcGFyYXRvcixcbiAgICAgIHRob3VzYW5kU2VwYXJhdG9yOiB0aG91c2FuZFNlcGFyYXRvcixcbiAgICAgIGFsbG93ZWREZWNpbWFsU2VwYXJhdG9yczogYWxsb3dlZERlY2ltYWxTZXBhcmF0b3JzLFxuICAgIH07XG4gIH07XG5cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS5nZXRNYXNrQXRJbmRleCA9IGZ1bmN0aW9uIGdldE1hc2tBdEluZGV4IChpbmRleCAgICAgICAgKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIG1hc2sgPSByZWYubWFzazsgaWYgKCBtYXNrID09PSB2b2lkIDAgKSBtYXNrID0gJyAnO1xuICAgIGlmICh0eXBlb2YgbWFzayA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBtYXNrO1xuICAgIH1cblxuICAgIHJldHVybiBtYXNrW2luZGV4XSB8fCAnICc7XG4gIH07XG5cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS5nZXRWYWx1ZU9iamVjdCA9IGZ1bmN0aW9uIGdldFZhbHVlT2JqZWN0IChmb3JtYXR0ZWRWYWx1ZSAgICAgICAgLCBudW1Bc1N0cmluZyAgICAgICAgKSB7XG4gICAgdmFyIGZsb2F0VmFsdWUgPSBwYXJzZUZsb2F0KG51bUFzU3RyaW5nKTtcblxuICAgIHJldHVybiB7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZTogZm9ybWF0dGVkVmFsdWUsXG4gICAgICB2YWx1ZTogbnVtQXNTdHJpbmcsXG4gICAgICBmbG9hdFZhbHVlOiBpc05hTihmbG9hdFZhbHVlKSA/IHVuZGVmaW5lZCA6IGZsb2F0VmFsdWUsXG4gICAgfTtcbiAgfTtcblxuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLnZhbGlkYXRlUHJvcHMgPSBmdW5jdGlvbiB2YWxpZGF0ZVByb3BzICgpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgbWFzayA9IHJlZi5tYXNrO1xuXG4gICAgLy92YWxpZGF0ZSBkZWNpbWFsU2VwYXJhdG9yIGFuZCB0aG91c2FuZFNlcGFyYXRvclxuICAgIHZhciByZWYkMSA9IHRoaXMuZ2V0U2VwYXJhdG9ycygpO1xuICAgIHZhciBkZWNpbWFsU2VwYXJhdG9yID0gcmVmJDEuZGVjaW1hbFNlcGFyYXRvcjtcbiAgICB2YXIgdGhvdXNhbmRTZXBhcmF0b3IgPSByZWYkMS50aG91c2FuZFNlcGFyYXRvcjtcblxuICAgIGlmIChkZWNpbWFsU2VwYXJhdG9yID09PSB0aG91c2FuZFNlcGFyYXRvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKChcIlxcbiAgICAgICAgICBEZWNpbWFsIHNlcGFyYXRvciBjYW4ndCBiZSBzYW1lIGFzIHRob3VzYW5kIHNlcGFyYXRvci5cXG4gICAgICAgICAgdGhvdXNhbmRTZXBhcmF0b3I6IFwiICsgdGhvdXNhbmRTZXBhcmF0b3IgKyBcIiAodGhvdXNhbmRTZXBhcmF0b3IgPSB7dHJ1ZX0gaXMgc2FtZSBhcyB0aG91c2FuZFNlcGFyYXRvciA9IFxcXCIsXFxcIilcXG4gICAgICAgICAgZGVjaW1hbFNlcGFyYXRvcjogXCIgKyBkZWNpbWFsU2VwYXJhdG9yICsgXCIgKGRlZmF1bHQgdmFsdWUgZm9yIGRlY2ltYWxTZXBhcmF0b3IgaXMgLilcXG4gICAgICAgXCIpKTtcbiAgICB9XG5cbiAgICAvL3ZhbGlkYXRlIG1hc2tcbiAgICBpZiAobWFzaykge1xuICAgICAgdmFyIG1hc2tBc1N0ciA9IG1hc2sgPT09ICdzdHJpbmcnID8gbWFzayA6IG1hc2sudG9TdHJpbmcoKTtcbiAgICAgIGlmIChtYXNrQXNTdHIubWF0Y2goL1xcZC9nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKFwiXFxuICAgICAgICAgIE1hc2sgXCIgKyBtYXNrICsgXCIgc2hvdWxkIG5vdCBjb250YWluIG51bWVyaWMgY2hhcmFjdGVyO1xcbiAgICAgICAgXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIC8qKiBNaXNjIG1ldGhvZHMgZW5kICoqL1xuXG4gIC8qKiBjYXJldCBzcGVjaWZpYyBtZXRob2RzICoqL1xuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLnNldFBhdGNoZWRDYXJldFBvc2l0aW9uID0gZnVuY3Rpb24gc2V0UGF0Y2hlZENhcmV0UG9zaXRpb24gKGVsICAgICAgICAgICAgICAgICAgLCBjYXJldFBvcyAgICAgICAgLCBjdXJyZW50VmFsdWUgICAgICAgICkge1xuICAgIC8qIHNldHRpbmcgY2FyZXQgcG9zaXRpb24gd2l0aGluIHRpbWVvdXQgb2YgMG1zIGlzIHJlcXVpcmVkIGZvciBtb2JpbGUgY2hyb21lLFxuICAgIG90aGVyd2lzZSBicm93c2VyIHJlc2V0cyB0aGUgY2FyZXQgcG9zaXRpb24gYWZ0ZXIgd2Ugc2V0IGl0XG4gICAgV2UgYXJlIGFsc28gc2V0dGluZyBpdCB3aXRob3V0IHRpbWVvdXQgc28gdGhhdCBpbiBub3JtYWwgYnJvd3NlciB3ZSBkb24ndCBzZWUgdGhlIGZsaWNrZXJpbmcgKi9cbiAgICBzZXRDYXJldFBvc2l0aW9uKGVsLCBjYXJldFBvcyk7XG4gICAgdGhpcy5jYXJldFBvc2l0aW9uVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGVsLnZhbHVlID09PSBjdXJyZW50VmFsdWUpIHsgc2V0Q2FyZXRQb3NpdGlvbihlbCwgY2FyZXRQb3MpOyB9XG4gICAgfSwgMCk7XG4gIH07XG5cbiAgLyogVGhpcyBrZWVwcyB0aGUgY2FyZXQgd2l0aGluIHR5cGluZyBhcmVhIHNvIHBlb3BsZSBjYW4ndCB0eXBlIGluIGJldHdlZW4gcHJlZml4IG9yIHN1ZmZpeCAqL1xuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmNvcnJlY3RDYXJldFBvc2l0aW9uID0gZnVuY3Rpb24gY29ycmVjdENhcmV0UG9zaXRpb24gKHZhbHVlICAgICAgICAsIGNhcmV0UG9zICAgICAgICAsIGRpcmVjdGlvbiAgICAgICAgICkge1xuICAgIHZhciByZWYgPSB0aGlzLnByb3BzO1xuICAgIHZhciBwcmVmaXggPSByZWYucHJlZml4O1xuICAgIHZhciBzdWZmaXggPSByZWYuc3VmZml4O1xuICAgIHZhciBmb3JtYXQgPSByZWYuZm9ybWF0O1xuXG4gICAgLy9pZiB2YWx1ZSBpcyBlbXB0eSByZXR1cm4gMFxuICAgIGlmICh2YWx1ZSA9PT0gJycpIHsgcmV0dXJuIDA7IH1cblxuICAgIC8vY2FyZXQgcG9zaXRpb24gc2hvdWxkIGJlIGJldHdlZW4gMCBhbmQgdmFsdWUgbGVuZ3RoXG4gICAgY2FyZXRQb3MgPSBjbGFtcChjYXJldFBvcywgMCwgdmFsdWUubGVuZ3RoKTtcblxuICAgIC8vaW4gY2FzZSBvZiBmb3JtYXQgYXMgbnVtYmVyIGxpbWl0IGJldHdlZW4gcHJlZml4IGFuZCBzdWZmaXhcbiAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgdmFyIGhhc05lZ2F0aW9uID0gdmFsdWVbMF0gPT09ICctJztcbiAgICAgIHJldHVybiBjbGFtcChjYXJldFBvcywgcHJlZml4Lmxlbmd0aCArIChoYXNOZWdhdGlvbiA/IDEgOiAwKSwgdmFsdWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCk7XG4gICAgfVxuXG4gICAgLy9pbiBjYXNlIGlmIGN1c3RvbSBmb3JtYXQgbWV0aG9kIGRvbid0IGRvIGFueXRoaW5nXG4gICAgaWYgKHR5cGVvZiBmb3JtYXQgPT09ICdmdW5jdGlvbicpIHsgcmV0dXJuIGNhcmV0UG9zOyB9XG5cbiAgICAvKiBpbiBjYXNlIGZvcm1hdCBpcyBzdHJpbmcgZmluZCB0aGUgY2xvc2VzdCAjIHBvc2l0aW9uIGZyb20gdGhlIGNhcmV0IHBvc2l0aW9uICovXG5cbiAgICAvL2luIGNhc2UgdGhlIGNhcmV0UG9zIGhhdmUgaW5wdXQgdmFsdWUgb24gaXQgZG9uJ3QgZG8gYW55dGhpbmdcbiAgICBpZiAoZm9ybWF0W2NhcmV0UG9zXSA9PT0gJyMnICYmIGNoYXJJc051bWJlcih2YWx1ZVtjYXJldFBvc10pKSB7XG4gICAgICByZXR1cm4gY2FyZXRQb3M7XG4gICAgfVxuXG4gICAgLy9pZiBjYXJldFBvcyBpcyBqdXN0IGFmdGVyIGlucHV0IHZhbHVlIGRvbid0IGRvIGFueXRoaW5nXG4gICAgaWYgKGZvcm1hdFtjYXJldFBvcyAtIDFdID09PSAnIycgJiYgY2hhcklzTnVtYmVyKHZhbHVlW2NhcmV0UG9zIC0gMV0pKSB7XG4gICAgICByZXR1cm4gY2FyZXRQb3M7XG4gICAgfVxuXG4gICAgLy9maW5kIHRoZSBuZWFyZXN0IGNhcmV0IHBvc2l0aW9uXG4gICAgdmFyIGZpcnN0SGFzaFBvc2l0aW9uID0gZm9ybWF0LmluZGV4T2YoJyMnKTtcbiAgICB2YXIgbGFzdEhhc2hQb3NpdGlvbiA9IGZvcm1hdC5sYXN0SW5kZXhPZignIycpO1xuXG4gICAgLy9saW1pdCB0aGUgY3Vyc29yIGJldHdlZW4gdGhlIGZpcnN0ICMgcG9zaXRpb24gYW5kIHRoZSBsYXN0ICMgcG9zaXRpb25cbiAgICBjYXJldFBvcyA9IGNsYW1wKGNhcmV0UG9zLCBmaXJzdEhhc2hQb3NpdGlvbiwgbGFzdEhhc2hQb3NpdGlvbiArIDEpO1xuXG4gICAgdmFyIG5leHRQb3MgPSBmb3JtYXQuc3Vic3RyaW5nKGNhcmV0UG9zLCBmb3JtYXQubGVuZ3RoKS5pbmRleE9mKCcjJyk7XG4gICAgdmFyIGNhcmV0TGVmdEJvdW5kID0gY2FyZXRQb3M7XG4gICAgdmFyIGNhcmV0UmlnaHRCb3VuZCA9IGNhcmV0UG9zICsgKG5leHRQb3MgPT09IC0xID8gMCA6IG5leHRQb3MpO1xuXG4gICAgLy9nZXQgdGhlIHBvc2l0aW9uIHdoZXJlIHRoZSBsYXN0IG51bWJlciBpcyBwcmVzZW50XG4gICAgd2hpbGUgKFxuICAgICAgY2FyZXRMZWZ0Qm91bmQgPiBmaXJzdEhhc2hQb3NpdGlvbiAmJlxuICAgICAgKGZvcm1hdFtjYXJldExlZnRCb3VuZF0gIT09ICcjJyB8fCAhY2hhcklzTnVtYmVyKHZhbHVlW2NhcmV0TGVmdEJvdW5kXSkpXG4gICAgKSB7XG4gICAgICBjYXJldExlZnRCb3VuZCAtPSAxO1xuICAgIH1cblxuICAgIHZhciBnb1RvTGVmdCA9XG4gICAgICAhY2hhcklzTnVtYmVyKHZhbHVlW2NhcmV0UmlnaHRCb3VuZF0pIHx8XG4gICAgICAoZGlyZWN0aW9uID09PSAnbGVmdCcgJiYgY2FyZXRQb3MgIT09IGZpcnN0SGFzaFBvc2l0aW9uKSB8fFxuICAgICAgY2FyZXRQb3MgLSBjYXJldExlZnRCb3VuZCA8IGNhcmV0UmlnaHRCb3VuZCAtIGNhcmV0UG9zO1xuXG4gICAgaWYgKGdvVG9MZWZ0KSB7XG4gICAgICAvL2NoZWNrIGlmIG51bWJlciBzaG91bGQgYmUgdGFrZW4gYWZ0ZXIgdGhlIGJvdW5kIG9yIGFmdGVyIGl0XG4gICAgICAvL2lmIG51bWJlciBwcmVjZWRpbmcgYSB2YWxpZCBudW1iZXIga2VlcCBpdCBhZnRlclxuICAgICAgcmV0dXJuIGNoYXJJc051bWJlcih2YWx1ZVtjYXJldExlZnRCb3VuZF0pID8gY2FyZXRMZWZ0Qm91bmQgKyAxIDogY2FyZXRMZWZ0Qm91bmQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhcmV0UmlnaHRCb3VuZDtcbiAgfTtcblxuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmdldENhcmV0UG9zaXRpb24gPSBmdW5jdGlvbiBnZXRDYXJldFBvc2l0aW9uIChpbnB1dFZhbHVlICAgICAgICAsIGZvcm1hdHRlZFZhbHVlICAgICAgICAsIGNhcmV0UG9zICAgICAgICApIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZm9ybWF0ID0gcmVmLmZvcm1hdDtcbiAgICB2YXIgc3RhdGVWYWx1ZSA9IHRoaXMuc3RhdGUudmFsdWU7XG4gICAgdmFyIG51bVJlZ2V4ID0gdGhpcy5nZXROdW1iZXJSZWdleCh0cnVlKTtcbiAgICB2YXIgaW5wdXROdW1iZXIgPSAoaW5wdXRWYWx1ZS5tYXRjaChudW1SZWdleCkgfHwgW10pLmpvaW4oJycpO1xuICAgIHZhciBmb3JtYXR0ZWROdW1iZXIgPSAoZm9ybWF0dGVkVmFsdWUubWF0Y2gobnVtUmVnZXgpIHx8IFtdKS5qb2luKCcnKTtcbiAgICB2YXIgaiwgaTtcblxuICAgIGogPSAwO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGNhcmV0UG9zOyBpKyspIHtcbiAgICAgIHZhciBjdXJyZW50SW5wdXRDaGFyID0gaW5wdXRWYWx1ZVtpXSB8fCAnJztcbiAgICAgIHZhciBjdXJyZW50Rm9ybWF0Q2hhciA9IGZvcm1hdHRlZFZhbHVlW2pdIHx8ICcnO1xuICAgICAgLy9ubyBuZWVkIHRvIGluY3JlYXNlIG5ldyBjdXJzb3IgcG9zaXRpb24gaWYgZm9ybWF0dGVkIHZhbHVlIGRvZXMgbm90IGhhdmUgdGhvc2UgY2hhcmFjdGVyc1xuICAgICAgLy9jYXNlIGlucHV0VmFsdWUgPSAxYTIzIGFuZCBmb3JtYXR0ZWRWYWx1ZSA9ICAxMjNcbiAgICAgIGlmICghY3VycmVudElucHV0Q2hhci5tYXRjaChudW1SZWdleCkgJiYgY3VycmVudElucHV0Q2hhciAhPT0gY3VycmVudEZvcm1hdENoYXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vV2hlbiB3ZSBhcmUgc3RyaXBpbmcgb3V0IGxlYWRpbmcgemVyb3MgbWFpbnRhaW4gdGhlIG5ldyBjdXJzb3IgcG9zaXRpb25cbiAgICAgIC8vQ2FzZSBpbnB1dFZhbHVlID0gMDAwMjMgYW5kIGZvcm1hdHRlZFZhbHVlID0gMjM7XG4gICAgICBpZiAoXG4gICAgICAgIGN1cnJlbnRJbnB1dENoYXIgPT09ICcwJyAmJlxuICAgICAgICBjdXJyZW50Rm9ybWF0Q2hhci5tYXRjaChudW1SZWdleCkgJiZcbiAgICAgICAgY3VycmVudEZvcm1hdENoYXIgIT09ICcwJyAmJlxuICAgICAgICBpbnB1dE51bWJlci5sZW5ndGggIT09IGZvcm1hdHRlZE51bWJlci5sZW5ndGhcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy93ZSBhcmUgbm90IHVzaW5nIGN1cnJlbnRGb3JtYXRDaGFyIGJlY2F1c2UgaiBjYW4gY2hhbmdlIGhlcmVcbiAgICAgIHdoaWxlIChjdXJyZW50SW5wdXRDaGFyICE9PSBmb3JtYXR0ZWRWYWx1ZVtqXSAmJiBqIDwgZm9ybWF0dGVkVmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIGorKztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ3N0cmluZycgJiYgIXN0YXRlVmFsdWUpIHtcbiAgICAgIC8vc2V0IGl0IHRvIHRoZSBtYXhpbXVtIHZhbHVlIHNvIGl0IGdvZXMgYWZ0ZXIgdGhlIGxhc3QgbnVtYmVyXG4gICAgICBqID0gZm9ybWF0dGVkVmFsdWUubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vY29ycmVjdCBjYXJldCBwb3NpdGlvbiBpZiBpdHMgb3V0c2lkZSBvZiBlZGl0YWJsZSBhcmVhXG4gICAgaiA9IHRoaXMuY29ycmVjdENhcmV0UG9zaXRpb24oZm9ybWF0dGVkVmFsdWUsIGopO1xuXG4gICAgcmV0dXJuIGo7XG4gIH07XG4gIC8qKiBjYXJldCBzcGVjaWZpYyBtZXRob2RzIGVuZHMgKiovXG5cbiAgLyoqIG1ldGhvZHMgdG8gcmVtb3ZlIGZvcm1hdHR0aW5nICoqL1xuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLnJlbW92ZVByZWZpeEFuZFN1ZmZpeCA9IGZ1bmN0aW9uIHJlbW92ZVByZWZpeEFuZFN1ZmZpeCAodmFsICAgICAgICApIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZm9ybWF0ID0gcmVmLmZvcm1hdDtcbiAgICB2YXIgcHJlZml4ID0gcmVmLnByZWZpeDtcbiAgICB2YXIgc3VmZml4ID0gcmVmLnN1ZmZpeDtcblxuICAgIC8vcmVtb3ZlIHByZWZpeCBhbmQgc3VmZml4XG4gICAgaWYgKCFmb3JtYXQgJiYgdmFsKSB7XG4gICAgICB2YXIgaXNOZWdhdGl2ZSA9IHZhbFswXSA9PT0gJy0nO1xuXG4gICAgICAvL3JlbW92ZSBuZWdhdGlvbiBzaWduXG4gICAgICBpZiAoaXNOZWdhdGl2ZSkgeyB2YWwgPSB2YWwuc3Vic3RyaW5nKDEsIHZhbC5sZW5ndGgpOyB9XG5cbiAgICAgIC8vcmVtb3ZlIHByZWZpeFxuICAgICAgdmFsID0gcHJlZml4ICYmIHZhbC5pbmRleE9mKHByZWZpeCkgPT09IDAgPyB2YWwuc3Vic3RyaW5nKHByZWZpeC5sZW5ndGgsIHZhbC5sZW5ndGgpIDogdmFsO1xuXG4gICAgICAvL3JlbW92ZSBzdWZmaXhcbiAgICAgIHZhciBzdWZmaXhMYXN0SW5kZXggPSB2YWwubGFzdEluZGV4T2Yoc3VmZml4KTtcbiAgICAgIHZhbCA9XG4gICAgICAgIHN1ZmZpeCAmJiBzdWZmaXhMYXN0SW5kZXggIT09IC0xICYmIHN1ZmZpeExhc3RJbmRleCA9PT0gdmFsLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGhcbiAgICAgICAgICA/IHZhbC5zdWJzdHJpbmcoMCwgc3VmZml4TGFzdEluZGV4KVxuICAgICAgICAgIDogdmFsO1xuXG4gICAgICAvL2FkZCBuZWdhdGlvbiBzaWduIGJhY2tcbiAgICAgIGlmIChpc05lZ2F0aXZlKSB7IHZhbCA9ICctJyArIHZhbDsgfVxuICAgIH1cblxuICAgIHJldHVybiB2YWw7XG4gIH07XG5cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS5yZW1vdmVQYXR0ZXJuRm9ybWF0dGluZyA9IGZ1bmN0aW9uIHJlbW92ZVBhdHRlcm5Gb3JtYXR0aW5nICh2YWwgICAgICAgICkge1xuICAgIHZhciByZWYgPSB0aGlzLnByb3BzO1xuICAgIHZhciBmb3JtYXQgPSByZWYuZm9ybWF0O1xuICAgIHZhciBmb3JtYXRBcnJheSA9IGZvcm1hdC5zcGxpdCgnIycpLmZpbHRlcihmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBzdHIgIT09ICcnOyB9KTtcbiAgICB2YXIgc3RhcnQgPSAwO1xuICAgIHZhciBudW1TdHIgPSAnJztcblxuICAgIGZvciAodmFyIGkgPSAwLCBsbiA9IGZvcm1hdEFycmF5Lmxlbmd0aDsgaSA8PSBsbjsgaSsrKSB7XG4gICAgICB2YXIgcGFydCA9IGZvcm1hdEFycmF5W2ldIHx8ICcnO1xuXG4gICAgICAvL2lmIGkgaXMgdGhlIGxhc3QgZnJhZ21lbnQgdGFrZSB0aGUgaW5kZXggb2YgZW5kIG9mIHRoZSB2YWx1ZVxuICAgICAgLy9Gb3IgY2FzZSBsaWtlICsxICg5MTEpIDkxMSA5MSA5MSBoYXZpbmcgcGF0dGVybiArMSAoIyMjKSAjIyMgIyMgIyNcbiAgICAgIHZhciBpbmRleCA9IGkgPT09IGxuID8gdmFsLmxlbmd0aCA6IHZhbC5pbmRleE9mKHBhcnQsIHN0YXJ0KTtcblxuICAgICAgLyogaW4gYW55IGNhc2UgaWYgd2UgZG9uJ3QgZmluZCB0aGUgcGF0dGVybiBwYXJ0IGluIHRoZSB2YWx1ZSBhc3N1bWUgdGhlIHZhbCBhcyBudW1lcmljIHN0cmluZ1xuICAgICAgVGhpcyB3aWxsIGJlIGFsc28gaW4gY2FzZSBpZiB1c2VyIGhhcyBzdGFydGVkIHR5cGluZywgaW4gYW55IG90aGVyIGNhc2UgaXQgd2lsbCBub3QgYmUgLTFcbiAgICAgIHVubGVzcyB3cm9uZyBwcm9wIHZhbHVlIGlzIHByb3ZpZGVkICovXG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIG51bVN0ciA9IHZhbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBudW1TdHIgKz0gdmFsLnN1YnN0cmluZyhzdGFydCwgaW5kZXgpO1xuICAgICAgICBzdGFydCA9IGluZGV4ICsgcGFydC5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIChudW1TdHIubWF0Y2godGhpcy5nZXROdW1iZXJSZWdleCh0cnVlKSkgfHwgW10pLmpvaW4oJycpO1xuICB9O1xuXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUucmVtb3ZlRm9ybWF0dGluZyA9IGZ1bmN0aW9uIHJlbW92ZUZvcm1hdHRpbmcgKHZhbCAgICAgICAgKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIGZvcm1hdCA9IHJlZi5mb3JtYXQ7XG4gICAgdmFyIHJlbW92ZUZvcm1hdHRpbmcgPSByZWYucmVtb3ZlRm9ybWF0dGluZztcbiAgICBpZiAoIXZhbCkgeyByZXR1cm4gdmFsOyB9XG5cbiAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgdmFsID0gdGhpcy5yZW1vdmVQcmVmaXhBbmRTdWZmaXgodmFsKTtcbiAgICAgIHZhbCA9IHRoaXMuZ2V0RmxvYXRTdHJpbmcodmFsKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmb3JtYXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWwgPSB0aGlzLnJlbW92ZVBhdHRlcm5Gb3JtYXR0aW5nKHZhbCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcmVtb3ZlRm9ybWF0dGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy9jb25kaXRpb24gbmVlZCB0byBiZSBoYW5kbGVkIGlmIGZvcm1hdCBtZXRob2QgaXMgcHJvdmlkZSxcbiAgICAgIHZhbCA9IHJlbW92ZUZvcm1hdHRpbmcodmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsID0gKHZhbC5tYXRjaCh0aGlzLmdldE51bWJlclJlZ2V4KHRydWUpKSB8fCBbXSkuam9pbignJyk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH07XG4gIC8qKiBtZXRob2RzIHRvIHJlbW92ZSBmb3JtYXR0dGluZyBlbmQgKiovXG5cbiAgLyoqKiBmb3JtYXQgc3BlY2lmaWMgbWV0aG9kcyBzdGFydCAqKiovXG4gIC8qKlxuICAgKiBGb3JtYXQgd2hlbiAjIGJhc2VkIHN0cmluZyBpcyBwcm92aWRlZFxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IG51bVN0ciBOdW1lcmljIFN0cmluZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgICBmb3JtYXR0ZWQgVmFsdWVcbiAgICovXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUuZm9ybWF0V2l0aFBhdHRlcm4gPSBmdW5jdGlvbiBmb3JtYXRXaXRoUGF0dGVybiAobnVtU3RyICAgICAgICApIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZm9ybWF0ID0gcmVmLmZvcm1hdDtcbiAgICB2YXIgaGFzaENvdW50ID0gMDtcbiAgICB2YXIgZm9ybWF0dGVkTnVtYmVyQXJ5ID0gZm9ybWF0LnNwbGl0KCcnKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbG4gPSBmb3JtYXQubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgaWYgKGZvcm1hdFtpXSA9PT0gJyMnKSB7XG4gICAgICAgIGZvcm1hdHRlZE51bWJlckFyeVtpXSA9IG51bVN0cltoYXNoQ291bnRdIHx8IHRoaXMuZ2V0TWFza0F0SW5kZXgoaGFzaENvdW50KTtcbiAgICAgICAgaGFzaENvdW50ICs9IDE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZWROdW1iZXJBcnkuam9pbignJyk7XG4gIH07XG4gIC8qKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IG51bVN0ciBOdW1lcmljIHN0cmluZy9mbG9hdFN0cmluZ10gSXQgYWx3YXlzIGhhdmUgZGVjaW1hbFNlcGFyYXRvciBhcyAuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gZm9ybWF0dGVkIFZhbHVlXG4gICAqL1xuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmZvcm1hdEFzTnVtYmVyID0gZnVuY3Rpb24gZm9ybWF0QXNOdW1iZXIgKG51bVN0ciAgICAgICAgKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIGRlY2ltYWxTY2FsZSA9IHJlZi5kZWNpbWFsU2NhbGU7XG4gICAgdmFyIGZpeGVkRGVjaW1hbFNjYWxlID0gcmVmLmZpeGVkRGVjaW1hbFNjYWxlO1xuICAgIHZhciBwcmVmaXggPSByZWYucHJlZml4O1xuICAgIHZhciBzdWZmaXggPSByZWYuc3VmZml4O1xuICAgIHZhciBhbGxvd05lZ2F0aXZlID0gcmVmLmFsbG93TmVnYXRpdmU7XG4gICAgdmFyIHRob3VzYW5kc0dyb3VwU3R5bGUgPSByZWYudGhvdXNhbmRzR3JvdXBTdHlsZTtcbiAgICB2YXIgcmVmJDEgPSB0aGlzLmdldFNlcGFyYXRvcnMoKTtcbiAgICB2YXIgdGhvdXNhbmRTZXBhcmF0b3IgPSByZWYkMS50aG91c2FuZFNlcGFyYXRvcjtcbiAgICB2YXIgZGVjaW1hbFNlcGFyYXRvciA9IHJlZiQxLmRlY2ltYWxTZXBhcmF0b3I7XG5cbiAgICB2YXIgaGFzRGVjaW1hbFNlcGFyYXRvciA9IG51bVN0ci5pbmRleE9mKCcuJykgIT09IC0xIHx8IChkZWNpbWFsU2NhbGUgJiYgZml4ZWREZWNpbWFsU2NhbGUpO1xuICAgIHZhciByZWYkMiA9IHNwbGl0RGVjaW1hbChudW1TdHIsIGFsbG93TmVnYXRpdmUpO1xuICAgIHZhciBiZWZvcmVEZWNpbWFsID0gcmVmJDIuYmVmb3JlRGVjaW1hbDtcbiAgICB2YXIgYWZ0ZXJEZWNpbWFsID0gcmVmJDIuYWZ0ZXJEZWNpbWFsO1xuICAgIHZhciBhZGROZWdhdGlvbiA9IHJlZiQyLmFkZE5lZ2F0aW9uOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1jb25zdFxuXG4gICAgLy9hcHBseSBkZWNpbWFsIHByZWNpc2lvbiBpZiBpdHMgZGVmaW5lZFxuICAgIGlmIChkZWNpbWFsU2NhbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgYWZ0ZXJEZWNpbWFsID0gbGltaXRUb1NjYWxlKGFmdGVyRGVjaW1hbCwgZGVjaW1hbFNjYWxlLCBmaXhlZERlY2ltYWxTY2FsZSk7XG4gICAgfVxuXG4gICAgaWYgKHRob3VzYW5kU2VwYXJhdG9yKSB7XG4gICAgICBiZWZvcmVEZWNpbWFsID0gYXBwbHlUaG91c2FuZFNlcGFyYXRvcihiZWZvcmVEZWNpbWFsLCB0aG91c2FuZFNlcGFyYXRvciwgdGhvdXNhbmRzR3JvdXBTdHlsZSk7XG4gICAgfVxuXG4gICAgLy9hZGQgcHJlZml4IGFuZCBzdWZmaXhcbiAgICBpZiAocHJlZml4KSB7IGJlZm9yZURlY2ltYWwgPSBwcmVmaXggKyBiZWZvcmVEZWNpbWFsOyB9XG4gICAgaWYgKHN1ZmZpeCkgeyBhZnRlckRlY2ltYWwgPSBhZnRlckRlY2ltYWwgKyBzdWZmaXg7IH1cblxuICAgIC8vcmVzdG9yZSBuZWdhdGlvbiBzaWduXG4gICAgaWYgKGFkZE5lZ2F0aW9uKSB7IGJlZm9yZURlY2ltYWwgPSAnLScgKyBiZWZvcmVEZWNpbWFsOyB9XG5cbiAgICBudW1TdHIgPSBiZWZvcmVEZWNpbWFsICsgKChoYXNEZWNpbWFsU2VwYXJhdG9yICYmIGRlY2ltYWxTZXBhcmF0b3IpIHx8ICcnKSArIGFmdGVyRGVjaW1hbDtcblxuICAgIHJldHVybiBudW1TdHI7XG4gIH07XG5cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS5mb3JtYXROdW1TdHJpbmcgPSBmdW5jdGlvbiBmb3JtYXROdW1TdHJpbmcgKG51bVN0cikge1xuICAgIGlmICggbnVtU3RyID09PSB2b2lkIDAgKSBudW1TdHIgICAgICAgICA9ICcnO1xuXG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIGZvcm1hdCA9IHJlZi5mb3JtYXQ7XG4gICAgdmFyIGFsbG93RW1wdHlGb3JtYXR0aW5nID0gcmVmLmFsbG93RW1wdHlGb3JtYXR0aW5nO1xuICAgIHZhciBjdXN0b21OdW1lcmFscyA9IHJlZi5jdXN0b21OdW1lcmFscztcbiAgICB2YXIgZm9ybWF0dGVkVmFsdWUgPSBudW1TdHI7XG5cbiAgICBpZiAoY3VzdG9tTnVtZXJhbHMgJiYgY3VzdG9tTnVtZXJhbHMubGVuZ3RoID09PSAxMCkge1xuICAgICAgdmFyIGN1c3RvbU51bWVyYWxSZWdleCA9IG5ldyBSZWdFeHAoJ1snICsgY3VzdG9tTnVtZXJhbHMuam9pbignJykgKyAnXScsICdnJyk7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZSA9IG51bVN0ci5yZXBsYWNlKGN1c3RvbU51bWVyYWxSZWdleCwgZnVuY3Rpb24gKGRpZ2l0KSB7IHJldHVybiBjdXN0b21OdW1lcmFscy5pbmRleE9mKGRpZ2l0KS50b1N0cmluZygpOyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChudW1TdHIgPT09ICcnICYmICFhbGxvd0VtcHR5Rm9ybWF0dGluZykge1xuICAgICAgZm9ybWF0dGVkVmFsdWUgPSAnJztcbiAgICB9IGVsc2UgaWYgKG51bVN0ciA9PT0gJy0nICYmICFmb3JtYXQpIHtcbiAgICAgIGZvcm1hdHRlZFZhbHVlID0gJy0nO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGZvcm1hdHRlZFZhbHVlID0gdGhpcy5mb3JtYXRXaXRoUGF0dGVybihmb3JtYXR0ZWRWYWx1ZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybWF0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGZvcm1hdChmb3JtYXR0ZWRWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1hdHRlZFZhbHVlID0gdGhpcy5mb3JtYXRBc051bWJlcihmb3JtYXR0ZWRWYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlO1xuICB9O1xuXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUuZm9ybWF0VmFsdWVQcm9wID0gZnVuY3Rpb24gZm9ybWF0VmFsdWVQcm9wIChkZWZhdWx0VmFsdWUgICAgICAgICAgICAgICAgICkge1xuICAgIHZhciByZWYgPSB0aGlzLnByb3BzO1xuICAgIHZhciBmb3JtYXQgPSByZWYuZm9ybWF0O1xuICAgIHZhciBkZWNpbWFsU2NhbGUgPSByZWYuZGVjaW1hbFNjYWxlO1xuICAgIHZhciBmaXhlZERlY2ltYWxTY2FsZSA9IHJlZi5maXhlZERlY2ltYWxTY2FsZTtcbiAgICB2YXIgYWxsb3dFbXB0eUZvcm1hdHRpbmcgPSByZWYuYWxsb3dFbXB0eUZvcm1hdHRpbmc7XG4gICAgdmFyIHJlZiQxID0gdGhpcy5wcm9wcztcbiAgICB2YXIgdmFsdWUgPSByZWYkMS52YWx1ZTtcbiAgICB2YXIgaXNOdW1lcmljU3RyaW5nID0gcmVmJDEuaXNOdW1lcmljU3RyaW5nO1xuXG4gICAgLy8gaWYgdmFsdWUgaXMgdW5kZWZpbmVkIG9yIG51bGwsIHVzZSBkZWZhdWx0VmFsdWUgaW5zdGVhZFxuICAgIHZhbHVlID0gaXNOaWwodmFsdWUpID8gZGVmYXVsdFZhbHVlIDogdmFsdWU7XG5cbiAgICB2YXIgaXNOb25OdW1lcmljRmFsc3kgPSAhdmFsdWUgJiYgdmFsdWUgIT09IDA7XG5cbiAgICBpZiAoaXNOb25OdW1lcmljRmFsc3kgJiYgYWxsb3dFbXB0eUZvcm1hdHRpbmcpIHtcbiAgICAgIHZhbHVlID0gJyc7XG4gICAgfVxuXG4gICAgLy8gaWYgdmFsdWUgaXMgbm90IGRlZmluZWQgcmV0dXJuIGVtcHR5IHN0cmluZ1xuICAgIGlmIChpc05vbk51bWVyaWNGYWxzeSAmJiAhYWxsb3dFbXB0eUZvcm1hdHRpbmcpIHsgcmV0dXJuICcnOyB9XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgdmFsdWUgPSB0b051bWVyaWNTdHJpbmcodmFsdWUpO1xuICAgICAgaXNOdW1lcmljU3RyaW5nID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvL2NoYW5nZSBpbmZpbml0eSB2YWx1ZSB0byBlbXB0eSBzdHJpbmdcbiAgICBpZiAodmFsdWUgPT09ICdJbmZpbml0eScgJiYgaXNOdW1lcmljU3RyaW5nKSB7XG4gICAgICB2YWx1ZSA9ICcnO1xuICAgIH1cblxuICAgIC8vcm91bmQgdGhlIG51bWJlciBiYXNlZCBvbiBkZWNpbWFsU2NhbGVcbiAgICAvL2Zvcm1hdCBvbmx5IGlmIG5vbiBmb3JtYXR0ZWQgdmFsdWUgaXMgcHJvdmlkZWRcbiAgICBpZiAoaXNOdW1lcmljU3RyaW5nICYmICFmb3JtYXQgJiYgdHlwZW9mIGRlY2ltYWxTY2FsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHZhbHVlID0gcm91bmRUb1ByZWNpc2lvbih2YWx1ZSwgZGVjaW1hbFNjYWxlLCBmaXhlZERlY2ltYWxTY2FsZSk7XG4gICAgfVxuXG4gICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gaXNOdW1lcmljU3RyaW5nID8gdGhpcy5mb3JtYXROdW1TdHJpbmcodmFsdWUpIDogdGhpcy5mb3JtYXRJbnB1dCh2YWx1ZSk7XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWU7XG4gIH07XG5cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS5mb3JtYXROZWdhdGlvbiA9IGZ1bmN0aW9uIGZvcm1hdE5lZ2F0aW9uICh2YWx1ZSkge1xuICAgIGlmICggdmFsdWUgPT09IHZvaWQgMCApIHZhbHVlICAgICAgICAgPSAnJztcblxuICAgIHZhciByZWYgPSB0aGlzLnByb3BzO1xuICAgIHZhciBhbGxvd05lZ2F0aXZlID0gcmVmLmFsbG93TmVnYXRpdmU7XG4gICAgdmFyIG5lZ2F0aW9uUmVnZXggPSBuZXcgUmVnRXhwKCcoLSknKTtcbiAgICB2YXIgZG91YmxlTmVnYXRpb25SZWdleCA9IG5ldyBSZWdFeHAoJygtKSguKSooLSknKTtcblxuICAgIC8vIENoZWNrIG51bWJlciBoYXMgJy0nIHZhbHVlXG4gICAgdmFyIGhhc05lZ2F0aW9uID0gbmVnYXRpb25SZWdleC50ZXN0KHZhbHVlKTtcblxuICAgIC8vIENoZWNrIG51bWJlciBoYXMgMiBvciBtb3JlICctJyB2YWx1ZXNcbiAgICB2YXIgcmVtb3ZlTmVnYXRpb24gPSBkb3VibGVOZWdhdGlvblJlZ2V4LnRlc3QodmFsdWUpO1xuXG4gICAgLy9yZW1vdmUgbmVnYXRpb25cbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoLy0vZywgJycpO1xuXG4gICAgaWYgKGhhc05lZ2F0aW9uICYmICFyZW1vdmVOZWdhdGlvbiAmJiBhbGxvd05lZ2F0aXZlKSB7XG4gICAgICB2YWx1ZSA9ICctJyArIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmZvcm1hdElucHV0ID0gZnVuY3Rpb24gZm9ybWF0SW5wdXQgKHZhbHVlKSB7XG4gICAgaWYgKCB2YWx1ZSA9PT0gdm9pZCAwICkgdmFsdWUgICAgICAgICA9ICcnO1xuXG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIGZvcm1hdCA9IHJlZi5mb3JtYXQ7XG5cbiAgICAvL2Zvcm1hdCBuZWdhdGlvbiBvbmx5IGlmIHdlIGFyZSBmb3JtYXR0aW5nIGFzIG51bWJlclxuICAgIGlmICghZm9ybWF0KSB7XG4gICAgICB2YWx1ZSA9IHRoaXMucmVtb3ZlUHJlZml4QW5kU3VmZml4KHZhbHVlKTtcbiAgICAgIHZhbHVlID0gdGhpcy5mb3JtYXROZWdhdGlvbih2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy9yZW1vdmUgZm9ybWF0dGluZyBmcm9tIG51bWJlclxuICAgIHZhbHVlID0gdGhpcy5yZW1vdmVGb3JtYXR0aW5nKHZhbHVlKTtcblxuICAgIHJldHVybiB0aGlzLmZvcm1hdE51bVN0cmluZyh2YWx1ZSk7XG4gIH07XG5cbiAgLyoqKiBmb3JtYXQgc3BlY2lmaWMgbWV0aG9kcyBlbmQgKioqL1xuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmlzQ2hhcmFjdGVyQUZvcm1hdCA9IGZ1bmN0aW9uIGlzQ2hhcmFjdGVyQUZvcm1hdCAoY2FyZXRQb3MgICAgICAgICwgdmFsdWUgICAgICAgICkge1xuICAgIHZhciByZWYgPSB0aGlzLnByb3BzO1xuICAgIHZhciBmb3JtYXQgPSByZWYuZm9ybWF0O1xuICAgIHZhciBwcmVmaXggPSByZWYucHJlZml4O1xuICAgIHZhciBzdWZmaXggPSByZWYuc3VmZml4O1xuICAgIHZhciBkZWNpbWFsU2NhbGUgPSByZWYuZGVjaW1hbFNjYWxlO1xuICAgIHZhciBmaXhlZERlY2ltYWxTY2FsZSA9IHJlZi5maXhlZERlY2ltYWxTY2FsZTtcbiAgICB2YXIgcmVmJDEgPSB0aGlzLmdldFNlcGFyYXRvcnMoKTtcbiAgICB2YXIgZGVjaW1hbFNlcGFyYXRvciA9IHJlZiQxLmRlY2ltYWxTZXBhcmF0b3I7XG5cbiAgICAvL2NoZWNrIHdpdGhpbiBmb3JtYXQgcGF0dGVyblxuICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSAnc3RyaW5nJyAmJiBmb3JtYXRbY2FyZXRQb3NdICE9PSAnIycpIHsgcmV0dXJuIHRydWU7IH1cblxuICAgIC8vY2hlY2sgaW4gbnVtYmVyIGZvcm1hdFxuICAgIGlmIChcbiAgICAgICFmb3JtYXQgJiZcbiAgICAgIChjYXJldFBvcyA8IHByZWZpeC5sZW5ndGggfHxcbiAgICAgICAgY2FyZXRQb3MgPj0gdmFsdWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCB8fFxuICAgICAgICAoZGVjaW1hbFNjYWxlICYmIGZpeGVkRGVjaW1hbFNjYWxlICYmIHZhbHVlW2NhcmV0UG9zXSA9PT0gZGVjaW1hbFNlcGFyYXRvcikpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoaXMgd2lsbCBjaGVjayBpZiBhbnkgZm9ybWF0dGluZyBnb3QgcmVtb3ZlZCBieSB0aGUgZGVsZXRlIG9yIGJhY2tzcGFjZSBhbmQgcmVzZXQgdGhlIHZhbHVlXG4gICAqIEl0IHdpbGwgYWxzbyB3b3JrIGFzIGZhbGxiYWNrIGlmIGFuZHJvaWQgY2hvbWUga2V5RG93biBoYW5kbGVyIGRvZXMgbm90IHdvcmtcbiAgICoqL1xuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLmNvcnJlY3RJbnB1dFZhbHVlID0gZnVuY3Rpb24gY29ycmVjdElucHV0VmFsdWUgKGNhcmV0UG9zICAgICAgICAsIGxhc3RWYWx1ZSAgICAgICAgLCB2YWx1ZSAgICAgICAgKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZm9ybWF0ID0gcmVmLmZvcm1hdDtcbiAgICB2YXIgYWxsb3dOZWdhdGl2ZSA9IHJlZi5hbGxvd05lZ2F0aXZlO1xuICAgIHZhciBwcmVmaXggPSByZWYucHJlZml4O1xuICAgIHZhciBzdWZmaXggPSByZWYuc3VmZml4O1xuICAgIHZhciBkZWNpbWFsU2NhbGUgPSByZWYuZGVjaW1hbFNjYWxlO1xuICAgIHZhciByZWYkMSA9IHRoaXMuZ2V0U2VwYXJhdG9ycygpO1xuICAgIHZhciBhbGxvd2VkRGVjaW1hbFNlcGFyYXRvcnMgPSByZWYkMS5hbGxvd2VkRGVjaW1hbFNlcGFyYXRvcnM7XG4gICAgdmFyIGRlY2ltYWxTZXBhcmF0b3IgPSByZWYkMS5kZWNpbWFsU2VwYXJhdG9yO1xuICAgIHZhciBsYXN0TnVtU3RyID0gdGhpcy5zdGF0ZS5udW1Bc1N0cmluZyB8fCAnJztcbiAgICB2YXIgcmVmJDIgPSB0aGlzLnNlbGVjdGlvbkJlZm9yZUlucHV0O1xuICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IHJlZiQyLnNlbGVjdGlvblN0YXJ0O1xuICAgIHZhciBzZWxlY3Rpb25FbmQgPSByZWYkMi5zZWxlY3Rpb25FbmQ7XG4gICAgdmFyIHJlZiQzID0gZmluZENoYW5nZWRJbmRleChsYXN0VmFsdWUsIHZhbHVlKTtcbiAgICB2YXIgc3RhcnQgPSByZWYkMy5zdGFydDtcbiAgICB2YXIgZW5kID0gcmVmJDMuZW5kO1xuXG4gICAgLyoqIENoZWNrIGZvciBhbnkgYWxsb3dlZCBkZWNpbWFsIHNlcGFyYXRvciBpcyBhZGRlZCBpbiB0aGUgbnVtZXJpYyBmb3JtYXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBkZWNpbWFsIHNlcGFyYXRvciAqL1xuICAgIGlmIChcbiAgICAgICFmb3JtYXQgJiZcbiAgICAgIHN0YXJ0ID09PSBlbmQgJiZcbiAgICAgIGFsbG93ZWREZWNpbWFsU2VwYXJhdG9ycy5pbmRleE9mKHZhbHVlW3NlbGVjdGlvblN0YXJ0XSkgIT09IC0xXG4gICAgKSB7XG4gICAgICB2YXIgc2VwYXJhdG9yID0gZGVjaW1hbFNjYWxlID09PSAwID8gJycgOiBkZWNpbWFsU2VwYXJhdG9yO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdmFsdWUuc3Vic3RyKDAsIHNlbGVjdGlvblN0YXJ0KSArIHNlcGFyYXRvciArIHZhbHVlLnN1YnN0cihzZWxlY3Rpb25TdGFydCArIDEsIHZhbHVlLmxlbmd0aClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIGxlZnRCb3VuZCA9ICEhZm9ybWF0ID8gMCA6IHByZWZpeC5sZW5ndGg7XG4gICAgdmFyIHJpZ2h0Qm91bmQgPSBsYXN0VmFsdWUubGVuZ3RoIC0gKCEhZm9ybWF0ID8gMCA6IHN1ZmZpeC5sZW5ndGgpO1xuXG4gICAgaWYgKFxuICAgICAgLy8gZG9uJ3QgZG8gYW55dGhpbmcgaWYgc29tZXRoaW5nIGdvdCBhZGRlZFxuICAgICAgdmFsdWUubGVuZ3RoID4gbGFzdFZhbHVlLmxlbmd0aCB8fFxuICAgICAgLy8gb3IgaWYgdGhlIG5ldyB2YWx1ZSBpcyBhbiBlbXB0eSBzdHJpbmdcbiAgICAgICF2YWx1ZS5sZW5ndGggfHxcbiAgICAgIC8vIG9yIGlmIG5vdGhpbmcgaGFzIGNoYW5nZWQsIGluIHdoaWNoIGNhc2Ugc3RhcnQgd2lsbCBiZSBzYW1lIGFzIGVuZFxuICAgICAgc3RhcnQgPT09IGVuZCB8fFxuICAgICAgLy8gb3IgaW4gY2FzZSBpZiB3aG9sZSBpbnB1dCBpcyBzZWxlY3RlZCBhbmQgbmV3IHZhbHVlIGlzIHR5cGVkXG4gICAgICAoc2VsZWN0aW9uU3RhcnQgPT09IDAgJiYgc2VsZWN0aW9uRW5kID09PSBsYXN0VmFsdWUubGVuZ3RoKSB8fFxuICAgICAgLy8gb3IgaW4gY2FzZSBpZiB0aGUgd2hvbGUgY29udGVudCBpcyByZXBsYWNlZCBieSBicm93c2VyLCBleGFtcGxlIChhdXRvY29tcGxldGUpXG4gICAgICAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBsYXN0VmFsdWUubGVuZ3RoKSB8fFxuICAgICAgLy8gb3IgaWYgY2hhcmN0ZXJzIGJldHdlZW4gcHJlZml4IGFuZCBzdWZmaXggaXMgc2VsZWN0ZWQuXG4gICAgICAvLyBGb3IgbnVtZXJpYyBpbnB1dHMgd2UgYXBwbHkgdGhlIGZvcm1hdCBzbywgcHJlZml4IGFuZCBzdWZmaXggY2FuIGJlIGlnbm9yZWRcbiAgICAgIChzZWxlY3Rpb25TdGFydCA9PT0gbGVmdEJvdW5kICYmIHNlbGVjdGlvbkVuZCA9PT0gcmlnaHRCb3VuZClcbiAgICApIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBkZWxldGVkIHBvcnRpb24gaGFzIGEgY2hhcmFjdGVyIHRoYXQgaXMgcGFydCBvZiBhIGZvcm1hdFxuICAgIHZhciBkZWxldGVkVmFsdWVzID0gbGFzdFZhbHVlLnN1YnN0cihzdGFydCwgZW5kIC0gc3RhcnQpO1xuICAgIHZhciBmb3JtYXRHb3REZWxldGVkID0gISFbXS5jb25jYXQoIGRlbGV0ZWRWYWx1ZXMgKS5maW5kKGZ1bmN0aW9uIChkZWxldGVkVmFsLCBpZHgpIHsgcmV0dXJuIHRoaXMkMS5pc0NoYXJhY3RlckFGb3JtYXQoaWR4ICsgc3RhcnQsIGxhc3RWYWx1ZSk7IH1cbiAgICApO1xuXG4gICAgLy8gaWYgaXQgaGFzLCBvbmx5IHJlbW92ZSBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoZSBmb3JtYXRcbiAgICBpZiAoZm9ybWF0R290RGVsZXRlZCkge1xuICAgICAgdmFyIGRlbGV0ZWRWYWx1ZVBvcnRpb24gPSBsYXN0VmFsdWUuc3Vic3RyKHN0YXJ0KTtcbiAgICAgIHZhciByZWNvcmRJbmRleE9mRm9ybWF0Q2hhcmFjdGVycyA9IHt9O1xuICAgICAgdmFyIHJlc29sdmVkUG9ydGlvbiA9IFtdO1xuICAgICAgW10uY29uY2F0KCBkZWxldGVkVmFsdWVQb3J0aW9uICkuZm9yRWFjaChmdW5jdGlvbiAoY3VycmVudFBvcnRpb24sIGlkeCkge1xuICAgICAgICBpZiAodGhpcyQxLmlzQ2hhcmFjdGVyQUZvcm1hdChpZHggKyBzdGFydCwgbGFzdFZhbHVlKSkge1xuICAgICAgICAgIHJlY29yZEluZGV4T2ZGb3JtYXRDaGFyYWN0ZXJzW2lkeF0gPSBjdXJyZW50UG9ydGlvbjtcbiAgICAgICAgfSBlbHNlIGlmIChpZHggPiBkZWxldGVkVmFsdWVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICByZXNvbHZlZFBvcnRpb24ucHVzaChjdXJyZW50UG9ydGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBPYmplY3Qua2V5cyhyZWNvcmRJbmRleE9mRm9ybWF0Q2hhcmFjdGVycykuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgIGlmIChyZXNvbHZlZFBvcnRpb24ubGVuZ3RoID4gaWR4KSB7XG4gICAgICAgICAgcmVzb2x2ZWRQb3J0aW9uLnNwbGljZShpZHgsIDAsIHJlY29yZEluZGV4T2ZGb3JtYXRDaGFyYWN0ZXJzW2lkeF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmVkUG9ydGlvbi5wdXNoKHJlY29yZEluZGV4T2ZGb3JtYXRDaGFyYWN0ZXJzW2lkeF0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdmFsdWUgPSBsYXN0VmFsdWUuc3Vic3RyKDAsIHN0YXJ0KSArIHJlc29sdmVkUG9ydGlvbi5qb2luKCcnKTtcbiAgICB9XG5cbiAgICAvL2ZvciBudW1iZXJzIGNoZWNrIGlmIGJlZm9yZURlY2ltYWwgZ290IGRlbGV0ZWQgYW5kIHRoZXJlIGlzIG5vdGhpbmcgYWZ0ZXIgZGVjaW1hbCxcbiAgICAvL2NsZWFyIGFsbCBudW1iZXJzIGluIHN1Y2ggY2FzZSB3aGlsZSBrZWVwaW5nIHRoZSAtIHNpZ25cbiAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgdmFyIG51bWVyaWNTdHJpbmcgPSB0aGlzLnJlbW92ZUZvcm1hdHRpbmcodmFsdWUpO1xuICAgICAgdmFyIHJlZiQ0ID0gc3BsaXREZWNpbWFsKFxuICAgICAgICBudW1lcmljU3RyaW5nLFxuICAgICAgICBhbGxvd05lZ2F0aXZlXG4gICAgICApO1xuICAgICAgdmFyIGJlZm9yZURlY2ltYWwgPSByZWYkNC5iZWZvcmVEZWNpbWFsO1xuICAgICAgdmFyIGFmdGVyRGVjaW1hbCA9IHJlZiQ0LmFmdGVyRGVjaW1hbDtcbiAgICAgIHZhciBhZGROZWdhdGlvbiA9IHJlZiQ0LmFkZE5lZ2F0aW9uOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1jb25zdFxuXG4gICAgICAvL2NsZWFyIG9ubHkgaWYgc29tZXRoaW5nIGdvdCBkZWxldGVkXG4gICAgICB2YXIgaXNCZWZvcmVEZWNpbWFsUG9pbnQgPSBjYXJldFBvcyA8IHZhbHVlLmluZGV4T2YoZGVjaW1hbFNlcGFyYXRvcikgKyAxO1xuICAgICAgaWYgKFxuICAgICAgICBudW1lcmljU3RyaW5nLmxlbmd0aCA8IGxhc3ROdW1TdHIubGVuZ3RoICYmXG4gICAgICAgIGlzQmVmb3JlRGVjaW1hbFBvaW50ICYmXG4gICAgICAgIGJlZm9yZURlY2ltYWwgPT09ICcnICYmXG4gICAgICAgICFwYXJzZUZsb2F0KGFmdGVyRGVjaW1hbClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gYWRkTmVnYXRpb24gPyAnLScgOiAnJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLyoqIFVwZGF0ZSB2YWx1ZSBhbmQgY2FyZXQgcG9zaXRpb24gKi9cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS51cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uIHVwZGF0ZVZhbHVlIChwYXJhbXMgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICkge1xuICAgIHZhciBmb3JtYXR0ZWRWYWx1ZSA9IHBhcmFtcy5mb3JtYXR0ZWRWYWx1ZTtcbiAgICB2YXIgaW5wdXQgPSBwYXJhbXMuaW5wdXQ7XG4gICAgdmFyIHNldENhcmV0UG9zaXRpb24gPSBwYXJhbXMuc2V0Q2FyZXRQb3NpdGlvbjsgaWYgKCBzZXRDYXJldFBvc2l0aW9uID09PSB2b2lkIDAgKSBzZXRDYXJldFBvc2l0aW9uID0gdHJ1ZTtcbiAgICB2YXIgc291cmNlID0gcGFyYW1zLnNvdXJjZTtcbiAgICB2YXIgZXZlbnQgPSBwYXJhbXMuZXZlbnQ7XG4gICAgdmFyIG51bUFzU3RyaW5nID0gcGFyYW1zLm51bUFzU3RyaW5nO1xuICAgIHZhciBjYXJldFBvcyA9IHBhcmFtcy5jYXJldFBvcztcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgb25WYWx1ZUNoYW5nZSA9IHJlZi5vblZhbHVlQ2hhbmdlO1xuICAgIHZhciByZWYkMSA9IHRoaXMuc3RhdGU7XG4gICAgdmFyIGxhc3RWYWx1ZSA9IHJlZiQxLnZhbHVlO1xuXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICAvL2NhbGN1bGF0ZSBjYXJldCBwb3NpdGlvbiBpZiBub3QgZGVmaW5lZFxuICAgICAgaWYgKGNhcmV0UG9zID09PSB1bmRlZmluZWQgJiYgc2V0Q2FyZXRQb3NpdGlvbikge1xuICAgICAgICB2YXIgaW5wdXRWYWx1ZSA9IHBhcmFtcy5pbnB1dFZhbHVlIHx8IGlucHV0LnZhbHVlO1xuXG4gICAgICAgIHZhciBjdXJyZW50Q2FyZXRQb3NpdGlvbiA9IGdldEN1cnJlbnRDYXJldFBvc2l0aW9uKGlucHV0KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2V0IHRoZSB2YWx1ZSBpbXBlcmF0aXZlbHksIHRoaXMgaXMgcmVxdWlyZWQgZm9yIElFIGZpeFxuICAgICAgICAgKiBUaGlzIGlzIGFsc28gcmVxdWlyZWQgYXMgaWYgbmV3IGNhcmV0IHBvc2l0aW9uIGlzIGJleW9uZCB0aGUgcHJldmlvdXMgdmFsdWUuXG4gICAgICAgICAqIENhcmV0IHBvc2l0aW9uIHdpbGwgbm90IGJlIHNldCBjb3JyZWN0bHlcbiAgICAgICAgICovXG4gICAgICAgIGlucHV0LnZhbHVlID0gZm9ybWF0dGVkVmFsdWU7XG5cbiAgICAgICAgLy9nZXQgdGhlIGNhcmV0IHBvc2l0aW9uXG4gICAgICAgIGNhcmV0UG9zID0gdGhpcy5nZXRDYXJldFBvc2l0aW9uKGlucHV0VmFsdWUsIGZvcm1hdHRlZFZhbHVlLCBjdXJyZW50Q2FyZXRQb3NpdGlvbik7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogc2V0IHRoZSB2YWx1ZSBpbXBlcmF0aXZlbHksIGFzIHdlIHNldCB0aGUgY2FyZXQgcG9zaXRpb24gYXMgd2VsbCBpbXBlcmF0aXZlbHkuXG4gICAgICAgKiBUaGlzIGlzIHRvIGtlZXAgdmFsdWUgYW5kIGNhcmV0IHBvc2l0aW9uIGluIHN5bmNcbiAgICAgICAqL1xuICAgICAgaW5wdXQudmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZTtcblxuICAgICAgLy9zZXQgY2FyZXQgcG9zaXRpb24sIGFuZCB2YWx1ZSBpbXBlcmF0aXZlbHkgd2hlbiBlbGVtZW50IGlzIHByb3ZpZGVkXG4gICAgICBpZiAoc2V0Q2FyZXRQb3NpdGlvbikge1xuICAgICAgICAvL3NldCBjYXJldCBwb3NpdGlvblxuICAgICAgICB0aGlzLnNldFBhdGNoZWRDYXJldFBvc2l0aW9uKGlucHV0LCBjYXJldFBvcywgZm9ybWF0dGVkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vY2FsY3VsYXRlIG51bWVyaWMgc3RyaW5nIGlmIG5vdCBwYXNzZWRcbiAgICBpZiAobnVtQXNTdHJpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgbnVtQXNTdHJpbmcgPSB0aGlzLnJlbW92ZUZvcm1hdHRpbmcoZm9ybWF0dGVkVmFsdWUpO1xuICAgIH1cblxuICAgIC8vdXBkYXRlIHN0YXRlIGlmIHZhbHVlIGlzIGNoYW5nZWRcbiAgICBpZiAoZm9ybWF0dGVkVmFsdWUgIT09IGxhc3RWYWx1ZSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlOiBmb3JtYXR0ZWRWYWx1ZSwgbnVtQXNTdHJpbmc6IG51bUFzU3RyaW5nIH0pO1xuXG4gICAgICAvLyB0cmlnZ2VyIG9uVmFsdWVDaGFuZ2Ugc3luY2hyb25vdXNseSwgc28gcGFyZW50IGlzIHVwZGF0ZWQgYWxvbmcgd2l0aCB0aGUgbnVtYmVyIGZvcm1hdC4gRml4IGZvciAjMjc3LCAjMjg3XG4gICAgICBvblZhbHVlQ2hhbmdlKHRoaXMuZ2V0VmFsdWVPYmplY3QoZm9ybWF0dGVkVmFsdWUsIG51bUFzU3RyaW5nKSwgeyBldmVudDogZXZlbnQsIHNvdXJjZTogc291cmNlIH0pO1xuICAgIH1cbiAgfTtcblxuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gb25DaGFuZ2UgKGUgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICB2YXIgZWwgPSBlLnRhcmdldDtcbiAgICB2YXIgaW5wdXRWYWx1ZSA9IGVsLnZhbHVlO1xuICAgIHZhciByZWYgPSB0aGlzO1xuICAgIHZhciBzdGF0ZSA9IHJlZi5zdGF0ZTtcbiAgICB2YXIgcHJvcHMgPSByZWYucHJvcHM7XG4gICAgdmFyIGlzQWxsb3dlZCA9IHByb3BzLmlzQWxsb3dlZDtcbiAgICB2YXIgbGFzdFZhbHVlID0gc3RhdGUudmFsdWUgfHwgJyc7XG5cbiAgICB2YXIgY3VycmVudENhcmV0UG9zaXRpb24gPSBnZXRDdXJyZW50Q2FyZXRQb3NpdGlvbihlbCk7XG5cbiAgICBpbnB1dFZhbHVlID0gdGhpcy5jb3JyZWN0SW5wdXRWYWx1ZShjdXJyZW50Q2FyZXRQb3NpdGlvbiwgbGFzdFZhbHVlLCBpbnB1dFZhbHVlKTtcblxuICAgIHZhciBmb3JtYXR0ZWRWYWx1ZSA9IHRoaXMuZm9ybWF0SW5wdXQoaW5wdXRWYWx1ZSkgfHwgJyc7XG4gICAgdmFyIG51bUFzU3RyaW5nID0gdGhpcy5yZW1vdmVGb3JtYXR0aW5nKGZvcm1hdHRlZFZhbHVlKTtcblxuICAgIHZhciB2YWx1ZU9iaiA9IHRoaXMuZ2V0VmFsdWVPYmplY3QoZm9ybWF0dGVkVmFsdWUsIG51bUFzU3RyaW5nKTtcbiAgICB2YXIgaXNDaGFuZ2VBbGxvd2VkID0gaXNBbGxvd2VkKHZhbHVlT2JqKTtcblxuICAgIGlmICghaXNDaGFuZ2VBbGxvd2VkKSB7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGxhc3RWYWx1ZTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVZhbHVlKHtcbiAgICAgIGZvcm1hdHRlZFZhbHVlOiBmb3JtYXR0ZWRWYWx1ZSxcbiAgICAgIG51bUFzU3RyaW5nOiBudW1Bc1N0cmluZyxcbiAgICAgIGlucHV0VmFsdWU6IGlucHV0VmFsdWUsXG4gICAgICBpbnB1dDogZWwsXG4gICAgICBldmVudDogZSxcbiAgICAgIHNvdXJjZTogJ2V2ZW50JyxcbiAgICB9KTtcblxuICAgIGlmIChpc0NoYW5nZUFsbG93ZWQpIHtcbiAgICAgIHByb3BzLm9uQ2hhbmdlKGUpO1xuICAgIH1cbiAgfTtcblxuICBOdW1iZXJGb3JtYXQucHJvdG90eXBlLm9uQmx1ciA9IGZ1bmN0aW9uIG9uQmx1ciAoZSAgICAgICAgICAgICAgICAgICAgICkge1xuICAgIHZhciByZWYgPSB0aGlzO1xuICAgIHZhciBwcm9wcyA9IHJlZi5wcm9wcztcbiAgICB2YXIgc3RhdGUgPSByZWYuc3RhdGU7XG4gICAgdmFyIGZvcm1hdCA9IHByb3BzLmZvcm1hdDtcbiAgICB2YXIgb25CbHVyID0gcHJvcHMub25CbHVyO1xuICAgIHZhciBhbGxvd0xlYWRpbmdaZXJvcyA9IHByb3BzLmFsbG93TGVhZGluZ1plcm9zO1xuICAgIHZhciBudW1Bc1N0cmluZyA9IHN0YXRlLm51bUFzU3RyaW5nO1xuICAgIHZhciBsYXN0VmFsdWUgPSBzdGF0ZS52YWx1ZTtcbiAgICB0aGlzLmZvY3VzZWRFbG0gPSBudWxsO1xuXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuZm9jdXNUaW1lb3V0KTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jYXJldFBvc2l0aW9uVGltZW91dCk7XG5cbiAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgLy8gaWYgdGhlIG51bUFzU3RyaW5nIGlzIG5vdCBhIHZhbGlkIG51bWJlciByZXNldCBpdCB0byBlbXB0eVxuICAgICAgaWYgKGlzTmFOKHBhcnNlRmxvYXQobnVtQXNTdHJpbmcpKSkge1xuICAgICAgICBudW1Bc1N0cmluZyA9ICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWFsbG93TGVhZGluZ1plcm9zKSB7XG4gICAgICAgIG51bUFzU3RyaW5nID0gZml4TGVhZGluZ1plcm8obnVtQXNTdHJpbmcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZm9ybWF0dGVkVmFsdWUgPSB0aGlzLmZvcm1hdE51bVN0cmluZyhudW1Bc1N0cmluZyk7XG5cbiAgICAgIC8vY2hhbmdlIHRoZSBzdGF0ZVxuICAgICAgaWYgKGZvcm1hdHRlZFZhbHVlICE9PSBsYXN0VmFsdWUpIHtcbiAgICAgICAgLy8gdGhlIGV2ZW50IG5lZWRzIHRvIGJlIHBlcnNpc3RlZCBiZWNhdXNlIGl0cyBwcm9wZXJ0aWVzIGNhbiBiZSBhY2Nlc3NlZCBpbiBhbiBhc3luY2hyb25vdXMgd2F5XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUoe1xuICAgICAgICAgIGZvcm1hdHRlZFZhbHVlOiBmb3JtYXR0ZWRWYWx1ZSxcbiAgICAgICAgICBudW1Bc1N0cmluZzogbnVtQXNTdHJpbmcsXG4gICAgICAgICAgaW5wdXQ6IGUudGFyZ2V0LFxuICAgICAgICAgIHNldENhcmV0UG9zaXRpb246IGZhbHNlLFxuICAgICAgICAgIGV2ZW50OiBlLFxuICAgICAgICAgIHNvdXJjZTogJ2V2ZW50JyxcbiAgICAgICAgfSk7XG4gICAgICAgIG9uQmx1cihlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBvbkJsdXIoZSk7XG4gIH07XG5cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS5vbktleURvd24gPSBmdW5jdGlvbiBvbktleURvd24gKGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuICAgIHZhciBrZXkgPSBlLmtleTtcbiAgICB2YXIgc2VsZWN0aW9uU3RhcnQgPSBlbC5zZWxlY3Rpb25TdGFydDtcbiAgICB2YXIgc2VsZWN0aW9uRW5kID0gZWwuc2VsZWN0aW9uRW5kO1xuICAgIHZhciB2YWx1ZSA9IGVsLnZhbHVlOyBpZiAoIHZhbHVlID09PSB2b2lkIDAgKSB2YWx1ZSA9ICcnO1xuICAgIHZhciBleHBlY3RlZENhcmV0UG9zaXRpb247XG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIGRlY2ltYWxTY2FsZSA9IHJlZi5kZWNpbWFsU2NhbGU7XG4gICAgdmFyIGZpeGVkRGVjaW1hbFNjYWxlID0gcmVmLmZpeGVkRGVjaW1hbFNjYWxlO1xuICAgIHZhciBwcmVmaXggPSByZWYucHJlZml4O1xuICAgIHZhciBzdWZmaXggPSByZWYuc3VmZml4O1xuICAgIHZhciBmb3JtYXQgPSByZWYuZm9ybWF0O1xuICAgIHZhciBvbktleURvd24gPSByZWYub25LZXlEb3duO1xuICAgIHZhciBpZ25vcmVEZWNpbWFsU2VwYXJhdG9yID0gZGVjaW1hbFNjYWxlICE9PSB1bmRlZmluZWQgJiYgZml4ZWREZWNpbWFsU2NhbGU7XG4gICAgdmFyIG51bVJlZ2V4ID0gdGhpcy5nZXROdW1iZXJSZWdleChmYWxzZSwgaWdub3JlRGVjaW1hbFNlcGFyYXRvcik7XG4gICAgdmFyIG5lZ2F0aXZlUmVnZXggPSBuZXcgUmVnRXhwKCctJyk7XG4gICAgdmFyIGlzUGF0dGVybkZvcm1hdCA9IHR5cGVvZiBmb3JtYXQgPT09ICdzdHJpbmcnO1xuXG4gICAgdGhpcy5zZWxlY3Rpb25CZWZvcmVJbnB1dCA9IHtcbiAgICAgIHNlbGVjdGlvblN0YXJ0OiBzZWxlY3Rpb25TdGFydCxcbiAgICAgIHNlbGVjdGlvbkVuZDogc2VsZWN0aW9uRW5kLFxuICAgIH07XG5cbiAgICAvL0hhbmRsZSBiYWNrc3BhY2UgYW5kIGRlbGV0ZSBhZ2FpbnN0IG5vbiBudW1lcmljYWwvZGVjaW1hbCBjaGFyYWN0ZXJzIG9yIGFycm93IGtleXNcbiAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0JyB8fCBrZXkgPT09ICdCYWNrc3BhY2UnKSB7XG4gICAgICBleHBlY3RlZENhcmV0UG9zaXRpb24gPSBzZWxlY3Rpb25TdGFydCAtIDE7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICdBcnJvd1JpZ2h0Jykge1xuICAgICAgZXhwZWN0ZWRDYXJldFBvc2l0aW9uID0gc2VsZWN0aW9uU3RhcnQgKyAxO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnRGVsZXRlJykge1xuICAgICAgZXhwZWN0ZWRDYXJldFBvc2l0aW9uID0gc2VsZWN0aW9uU3RhcnQ7XG4gICAgfVxuXG4gICAgLy9pZiBleHBlY3RlZENhcmV0UG9zaXRpb24gaXMgbm90IHNldCBpdCBtZWFucyB3ZSBkb24ndCB3YW50IHRvIEhhbmRsZSBrZXlEb3duXG4gICAgLy9hbHNvIGlmIG11bHRpcGxlIGNoYXJhY3RlcnMgYXJlIHNlbGVjdGVkIGRvbid0IGhhbmRsZVxuICAgIGlmIChleHBlY3RlZENhcmV0UG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCBzZWxlY3Rpb25TdGFydCAhPT0gc2VsZWN0aW9uRW5kKSB7XG4gICAgICBvbktleURvd24oZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5ld0NhcmV0UG9zaXRpb24gPSBleHBlY3RlZENhcmV0UG9zaXRpb247XG4gICAgdmFyIGxlZnRCb3VuZCA9IGlzUGF0dGVybkZvcm1hdCA/IGZvcm1hdC5pbmRleE9mKCcjJykgOiBwcmVmaXgubGVuZ3RoO1xuICAgIHZhciByaWdodEJvdW5kID0gaXNQYXR0ZXJuRm9ybWF0ID8gZm9ybWF0Lmxhc3RJbmRleE9mKCcjJykgKyAxIDogdmFsdWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aDtcblxuICAgIGlmIChrZXkgPT09ICdBcnJvd0xlZnQnIHx8IGtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICB2YXIgZGlyZWN0aW9uID0ga2V5ID09PSAnQXJyb3dMZWZ0JyA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gICAgICBuZXdDYXJldFBvc2l0aW9uID0gdGhpcy5jb3JyZWN0Q2FyZXRQb3NpdGlvbih2YWx1ZSwgZXhwZWN0ZWRDYXJldFBvc2l0aW9uLCBkaXJlY3Rpb24pO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBrZXkgPT09ICdEZWxldGUnICYmXG4gICAgICAhbnVtUmVnZXgudGVzdCh2YWx1ZVtleHBlY3RlZENhcmV0UG9zaXRpb25dKSAmJlxuICAgICAgIW5lZ2F0aXZlUmVnZXgudGVzdCh2YWx1ZVtleHBlY3RlZENhcmV0UG9zaXRpb25dKVxuICAgICkge1xuICAgICAgd2hpbGUgKCFudW1SZWdleC50ZXN0KHZhbHVlW25ld0NhcmV0UG9zaXRpb25dKSAmJiBuZXdDYXJldFBvc2l0aW9uIDwgcmlnaHRCb3VuZCkge1xuICAgICAgICBuZXdDYXJldFBvc2l0aW9uKys7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICdCYWNrc3BhY2UnICYmICFudW1SZWdleC50ZXN0KHZhbHVlW2V4cGVjdGVkQ2FyZXRQb3NpdGlvbl0pKSB7XG4gICAgICAvKiBOT1RFOiBUaGlzIGlzIHNwZWNpYWwgY2FzZSB3aGVuIGJhY2tzcGFjZSBpcyBwcmVzc2VkIG9uIGFcbiAgICAgIG5lZ2F0aXZlIHZhbHVlIHdoaWxlIHRoZSBjdXJzb3IgcG9zaXRpb24gaXMgYWZ0ZXIgcHJlZml4LiBXZSBjYW4ndCBoYW5kbGUgaXQgb24gb25DaGFuZ2UgYmVjYXVzZVxuICAgICAgd2Ugd2lsbCBub3QgaGF2ZSBhbnkgaW5mb3JtYXRpb24gb2Yga2V5UHJlc3NcbiAgICAgICovXG4gICAgICBpZiAoc2VsZWN0aW9uU3RhcnQgPD0gbGVmdEJvdW5kICsgMSAmJiB2YWx1ZVswXSA9PT0gJy0nICYmIHR5cGVvZiBmb3JtYXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh7XG4gICAgICAgICAgZm9ybWF0dGVkVmFsdWU6IG5ld1ZhbHVlLFxuICAgICAgICAgIGNhcmV0UG9zOiBuZXdDYXJldFBvc2l0aW9uLFxuICAgICAgICAgIGlucHV0OiBlbCxcbiAgICAgICAgICBldmVudDogZSxcbiAgICAgICAgICBzb3VyY2U6ICdldmVudCcsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICghbmVnYXRpdmVSZWdleC50ZXN0KHZhbHVlW2V4cGVjdGVkQ2FyZXRQb3NpdGlvbl0pKSB7XG4gICAgICAgIHdoaWxlICghbnVtUmVnZXgudGVzdCh2YWx1ZVtuZXdDYXJldFBvc2l0aW9uIC0gMV0pICYmIG5ld0NhcmV0UG9zaXRpb24gPiBsZWZ0Qm91bmQpIHtcbiAgICAgICAgICBuZXdDYXJldFBvc2l0aW9uLS07XG4gICAgICAgIH1cbiAgICAgICAgbmV3Q2FyZXRQb3NpdGlvbiA9IHRoaXMuY29ycmVjdENhcmV0UG9zaXRpb24odmFsdWUsIG5ld0NhcmV0UG9zaXRpb24sICdsZWZ0Jyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgbmV3Q2FyZXRQb3NpdGlvbiAhPT0gZXhwZWN0ZWRDYXJldFBvc2l0aW9uIHx8XG4gICAgICBleHBlY3RlZENhcmV0UG9zaXRpb24gPCBsZWZ0Qm91bmQgfHxcbiAgICAgIGV4cGVjdGVkQ2FyZXRQb3NpdGlvbiA+IHJpZ2h0Qm91bmRcbiAgICApIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc2V0UGF0Y2hlZENhcmV0UG9zaXRpb24oZWwsIG5ld0NhcmV0UG9zaXRpb24sIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKiBOT1RFOiB0aGlzIGlzIGp1c3QgcmVxdWlyZWQgZm9yIHVuaXQgdGVzdCBhcyB3ZSBuZWVkIHRvIGdldCB0aGUgbmV3Q2FyZXRQb3NpdGlvbixcbiAgICAgICAgICAgIFJlbW92ZSB0aGlzIHdoZW4geW91IGZpbmQgZGlmZmVyZW50IHNvbHV0aW9uICovXG4gICAgaWYgKGUuaXNVbml0VGVzdFJ1bikge1xuICAgICAgdGhpcy5zZXRQYXRjaGVkQ2FyZXRQb3NpdGlvbihlbCwgbmV3Q2FyZXRQb3NpdGlvbiwgdmFsdWUpO1xuICAgIH1cblxuICAgIG9uS2V5RG93bihlKTtcbiAgfTtcblxuICAvKiogcmVxdWlyZWQgdG8gaGFuZGxlIHRoZSBjYXJldCBwb3NpdGlvbiB3aGVuIGNsaWNrIGFueXdoZXJlIHdpdGhpbiB0aGUgaW5wdXQgKiovXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUub25Nb3VzZVVwID0gZnVuY3Rpb24gb25Nb3VzZVVwIChlICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICB2YXIgZWwgPSBlLnRhcmdldDtcblxuICAgIC8qKlxuICAgICAqIE5PVEU6IHdlIGhhdmUgdG8gZ2l2ZSBkZWZhdWx0IHZhbHVlIGZvciB2YWx1ZSBhcyBpbiBjYXNlIHdoZW4gY3VzdG9tIGlucHV0IGlzIHByb3ZpZGVkXG4gICAgICogdmFsdWUgY2FuIGNvbWUgYXMgdW5kZWZpbmVkIHdoZW4gbm90aGluZyBpcyBwcm92aWRlZCBvbiB2YWx1ZSBwcm9wLlxuICAgICAqL1xuICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IGVsLnNlbGVjdGlvblN0YXJ0O1xuICAgIHZhciBzZWxlY3Rpb25FbmQgPSBlbC5zZWxlY3Rpb25FbmQ7XG4gICAgdmFyIHZhbHVlID0gZWwudmFsdWU7IGlmICggdmFsdWUgPT09IHZvaWQgMCApIHZhbHVlID0gJyc7XG5cbiAgICBpZiAoc2VsZWN0aW9uU3RhcnQgPT09IHNlbGVjdGlvbkVuZCkge1xuICAgICAgdmFyIGNhcmV0UG9zaXRpb24gPSB0aGlzLmNvcnJlY3RDYXJldFBvc2l0aW9uKHZhbHVlLCBzZWxlY3Rpb25TdGFydCk7XG4gICAgICBpZiAoY2FyZXRQb3NpdGlvbiAhPT0gc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgICAgdGhpcy5zZXRQYXRjaGVkQ2FyZXRQb3NpdGlvbihlbCwgY2FyZXRQb3NpdGlvbiwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucHJvcHMub25Nb3VzZVVwKGUpO1xuICB9O1xuXG4gIE51bWJlckZvcm1hdC5wcm90b3R5cGUub25Gb2N1cyA9IGZ1bmN0aW9uIG9uRm9jdXMgKGUgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIC8vIFdvcmthcm91bmQgQ2hyb21lIGFuZCBTYWZhcmkgYnVnIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTc3OTMyOFxuICAgIC8vIChvbkZvY3VzIGV2ZW50IHRhcmdldCBzZWxlY3Rpb25TdGFydCBpcyBhbHdheXMgMCBiZWZvcmUgc2V0VGltZW91dClcbiAgICBlLnBlcnNpc3QoKTtcblxuICAgIHRoaXMuZm9jdXNlZEVsbSA9IGUudGFyZ2V0O1xuICAgIHRoaXMuZm9jdXNUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZWwgPSBlLnRhcmdldDtcbiAgICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IGVsLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgdmFyIHNlbGVjdGlvbkVuZCA9IGVsLnNlbGVjdGlvbkVuZDtcbiAgICAgIHZhciB2YWx1ZSA9IGVsLnZhbHVlOyBpZiAoIHZhbHVlID09PSB2b2lkIDAgKSB2YWx1ZSA9ICcnO1xuXG4gICAgICB2YXIgY2FyZXRQb3NpdGlvbiA9IHRoaXMkMS5jb3JyZWN0Q2FyZXRQb3NpdGlvbih2YWx1ZSwgc2VsZWN0aW9uU3RhcnQpO1xuXG4gICAgICAvL3NldFBhdGNoZWRDYXJldFBvc2l0aW9uIG9ubHkgd2hlbiBldmVyeXRoaW5nIGlzIG5vdCBzZWxlY3RlZCBvbiBmb2N1cyAod2hpbGUgdGFiYmluZyBpbnRvIHRoZSBmaWVsZClcbiAgICAgIGlmIChcbiAgICAgICAgY2FyZXRQb3NpdGlvbiAhPT0gc2VsZWN0aW9uU3RhcnQgJiZcbiAgICAgICAgIShzZWxlY3Rpb25TdGFydCA9PT0gMCAmJiBzZWxlY3Rpb25FbmQgPT09IHZhbHVlLmxlbmd0aClcbiAgICAgICkge1xuICAgICAgICB0aGlzJDEuc2V0UGF0Y2hlZENhcmV0UG9zaXRpb24oZWwsIGNhcmV0UG9zaXRpb24sIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcyQxLnByb3BzLm9uRm9jdXMoZSk7XG4gICAgfSwgMCk7XG4gIH07XG5cbiAgTnVtYmVyRm9ybWF0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIgKCkge1xuICAgIHZhciByZWYgPSB0aGlzLnByb3BzO1xuICAgIHZhciB0eXBlID0gcmVmLnR5cGU7XG4gICAgdmFyIGRpc3BsYXlUeXBlID0gcmVmLmRpc3BsYXlUeXBlO1xuICAgIHZhciBjdXN0b21JbnB1dCA9IHJlZi5jdXN0b21JbnB1dDtcbiAgICB2YXIgcmVuZGVyVGV4dCA9IHJlZi5yZW5kZXJUZXh0O1xuICAgIHZhciBnZXRJbnB1dFJlZiA9IHJlZi5nZXRJbnB1dFJlZjtcbiAgICB2YXIgZm9ybWF0ID0gcmVmLmZvcm1hdDtcbiAgICB2YXIgdGhvdXNhbmRTZXBhcmF0b3IgPSByZWYudGhvdXNhbmRTZXBhcmF0b3I7XG4gICAgdmFyIGRlY2ltYWxTZXBhcmF0b3IgPSByZWYuZGVjaW1hbFNlcGFyYXRvcjtcbiAgICB2YXIgYWxsb3dlZERlY2ltYWxTZXBhcmF0b3JzID0gcmVmLmFsbG93ZWREZWNpbWFsU2VwYXJhdG9ycztcbiAgICB2YXIgdGhvdXNhbmRzR3JvdXBTdHlsZSA9IHJlZi50aG91c2FuZHNHcm91cFN0eWxlO1xuICAgIHZhciBkZWNpbWFsU2NhbGUgPSByZWYuZGVjaW1hbFNjYWxlO1xuICAgIHZhciBmaXhlZERlY2ltYWxTY2FsZSA9IHJlZi5maXhlZERlY2ltYWxTY2FsZTtcbiAgICB2YXIgcHJlZml4ID0gcmVmLnByZWZpeDtcbiAgICB2YXIgc3VmZml4ID0gcmVmLnN1ZmZpeDtcbiAgICB2YXIgcmVtb3ZlRm9ybWF0dGluZyA9IHJlZi5yZW1vdmVGb3JtYXR0aW5nO1xuICAgIHZhciBtYXNrID0gcmVmLm1hc2s7XG4gICAgdmFyIGRlZmF1bHRWYWx1ZSA9IHJlZi5kZWZhdWx0VmFsdWU7XG4gICAgdmFyIGlzTnVtZXJpY1N0cmluZyA9IHJlZi5pc051bWVyaWNTdHJpbmc7XG4gICAgdmFyIGFsbG93TmVnYXRpdmUgPSByZWYuYWxsb3dOZWdhdGl2ZTtcbiAgICB2YXIgYWxsb3dFbXB0eUZvcm1hdHRpbmcgPSByZWYuYWxsb3dFbXB0eUZvcm1hdHRpbmc7XG4gICAgdmFyIGFsbG93TGVhZGluZ1plcm9zID0gcmVmLmFsbG93TGVhZGluZ1plcm9zO1xuICAgIHZhciBvblZhbHVlQ2hhbmdlID0gcmVmLm9uVmFsdWVDaGFuZ2U7XG4gICAgdmFyIGlzQWxsb3dlZCA9IHJlZi5pc0FsbG93ZWQ7XG4gICAgdmFyIGN1c3RvbU51bWVyYWxzID0gcmVmLmN1c3RvbU51bWVyYWxzO1xuICAgIHZhciBvbkNoYW5nZSA9IHJlZi5vbkNoYW5nZTtcbiAgICB2YXIgb25LZXlEb3duID0gcmVmLm9uS2V5RG93bjtcbiAgICB2YXIgb25Nb3VzZVVwID0gcmVmLm9uTW91c2VVcDtcbiAgICB2YXIgb25Gb2N1cyA9IHJlZi5vbkZvY3VzO1xuICAgIHZhciBvbkJsdXIgPSByZWYub25CbHVyO1xuICAgIHZhciBwcm9wVmFsdWUgPSByZWYudmFsdWU7XG4gICAgdmFyIHJlc3QgPSBvYmplY3RXaXRob3V0UHJvcGVydGllcyggcmVmLCBbXCJ0eXBlXCIsIFwiZGlzcGxheVR5cGVcIiwgXCJjdXN0b21JbnB1dFwiLCBcInJlbmRlclRleHRcIiwgXCJnZXRJbnB1dFJlZlwiLCBcImZvcm1hdFwiLCBcInRob3VzYW5kU2VwYXJhdG9yXCIsIFwiZGVjaW1hbFNlcGFyYXRvclwiLCBcImFsbG93ZWREZWNpbWFsU2VwYXJhdG9yc1wiLCBcInRob3VzYW5kc0dyb3VwU3R5bGVcIiwgXCJkZWNpbWFsU2NhbGVcIiwgXCJmaXhlZERlY2ltYWxTY2FsZVwiLCBcInByZWZpeFwiLCBcInN1ZmZpeFwiLCBcInJlbW92ZUZvcm1hdHRpbmdcIiwgXCJtYXNrXCIsIFwiZGVmYXVsdFZhbHVlXCIsIFwiaXNOdW1lcmljU3RyaW5nXCIsIFwiYWxsb3dOZWdhdGl2ZVwiLCBcImFsbG93RW1wdHlGb3JtYXR0aW5nXCIsIFwiYWxsb3dMZWFkaW5nWmVyb3NcIiwgXCJvblZhbHVlQ2hhbmdlXCIsIFwiaXNBbGxvd2VkXCIsIFwiY3VzdG9tTnVtZXJhbHNcIiwgXCJvbkNoYW5nZVwiLCBcIm9uS2V5RG93blwiLCBcIm9uTW91c2VVcFwiLCBcIm9uRm9jdXNcIiwgXCJvbkJsdXJcIiwgXCJ2YWx1ZVwiXSApO1xuICAgIHZhciBvdGhlclByb3BzID0gcmVzdDtcbiAgICB2YXIgcmVmJDEgPSB0aGlzLnN0YXRlO1xuICAgIHZhciB2YWx1ZSA9IHJlZiQxLnZhbHVlO1xuICAgIHZhciBtb3VudGVkID0gcmVmJDEubW91bnRlZDtcblxuICAgIC8vIGFkZCBpbnB1dCBtb2RlIG9uIGVsZW1lbnQgYmFzZWQgb24gZm9ybWF0IHByb3AgYW5kIGRldmljZSBvbmNlIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZFxuICAgIHZhciBpbnB1dE1vZGUgPSBtb3VudGVkICYmIGFkZElucHV0TW9kZShmb3JtYXQpID8gJ251bWVyaWMnIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGlucHV0UHJvcHMgPSBPYmplY3QuYXNzaWduKHsgaW5wdXRNb2RlOiBpbnB1dE1vZGUgfSwgb3RoZXJQcm9wcywge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uQ2hhbmdlLFxuICAgICAgb25LZXlEb3duOiB0aGlzLm9uS2V5RG93bixcbiAgICAgIG9uTW91c2VVcDogdGhpcy5vbk1vdXNlVXAsXG4gICAgICBvbkZvY3VzOiB0aGlzLm9uRm9jdXMsXG4gICAgICBvbkJsdXI6IHRoaXMub25CbHVyLFxuICAgIH0pO1xuXG4gICAgaWYgKGRpc3BsYXlUeXBlID09PSAndGV4dCcpIHtcbiAgICAgIHJldHVybiByZW5kZXJUZXh0ID8gKFxuICAgICAgICByZW5kZXJUZXh0KHZhbHVlLCBvdGhlclByb3BzKSB8fCBudWxsXG4gICAgICApIDogKFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCAnc3BhbicsIE9iamVjdC5hc3NpZ24oe30sIG90aGVyUHJvcHMsIHsgcmVmOiBnZXRJbnB1dFJlZiB9KSxcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICApXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoY3VzdG9tSW5wdXQpIHtcbiAgICAgIHZhciBDdXN0b21JbnB1dCA9IGN1c3RvbUlucHV0O1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoIEN1c3RvbUlucHV0LCBPYmplY3QuYXNzaWduKHt9LCBpbnB1dFByb3BzLCB7IHJlZjogZ2V0SW5wdXRSZWYgfSkpO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCAnaW5wdXQnLCBPYmplY3QuYXNzaWduKHt9LCBpbnB1dFByb3BzLCB7IHJlZjogZ2V0SW5wdXRSZWYgfSkpO1xuICB9O1xuXG4gIHJldHVybiBOdW1iZXJGb3JtYXQ7XG59KFJlYWN0LkNvbXBvbmVudCkpO1xuXG5OdW1iZXJGb3JtYXQuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuXG5leHBvcnQgZGVmYXVsdCBOdW1iZXJGb3JtYXQ7XG4iXSwibmFtZXMiOlsibm9vcCIsImNoYXJJc051bWJlciIsImNoYXIiLCJtYXRjaCIsImlzTmlsIiwidmFsIiwiZXNjYXBlUmVnRXhwIiwic3RyIiwicmVwbGFjZSIsInNwbGl0RGVjaW1hbCIsIm51bVN0ciIsImFsbG93TmVnYXRpdmUiLCJoYXNOYWdhdGlvbiIsImFkZE5lZ2F0aW9uIiwicGFydHMiLCJzcGxpdCIsImJlZm9yZURlY2ltYWwiLCJhZnRlckRlY2ltYWwiLCJsaW1pdFRvU2NhbGUiLCJzY2FsZSIsImZpeGVkRGVjaW1hbFNjYWxlIiwiZmlsbGVyIiwiaSIsInJlcGVhdCIsImNvdW50IiwiQXJyYXkiLCJqb2luIiwic2V0Q2FyZXRQb3NpdGlvbiIsImVsIiwiY2FyZXRQb3MiLCJ2YWx1ZSIsImNyZWF0ZVRleHRSYW5nZSIsInJhbmdlIiwibW92ZSIsInNlbGVjdCIsInNlbGVjdGlvblN0YXJ0IiwiZm9jdXMiLCJzZXRTZWxlY3Rpb25SYW5nZSIsImNsYW1wIiwibnVtIiwibWluIiwibWF4IiwiTWF0aCIsImdldEN1cnJlbnRDYXJldFBvc2l0aW9uIiwic2VsZWN0aW9uRW5kIiwiZGVmYXVsdFByb3BzIiwiZGlzcGxheVR5cGUiLCJkZWNpbWFsU2VwYXJhdG9yIiwidGhvdXNhbmRzR3JvdXBTdHlsZSIsInByZWZpeCIsInN1ZmZpeCIsImFsbG93RW1wdHlGb3JtYXR0aW5nIiwiYWxsb3dMZWFkaW5nWmVyb3MiLCJpc051bWVyaWNTdHJpbmciLCJ0eXBlIiwib25WYWx1ZUNoYW5nZSIsIm9uQ2hhbmdlIiwib25LZXlEb3duIiwib25Nb3VzZVVwIiwib25Gb2N1cyIsIm9uQmx1ciIsImlzQWxsb3dlZCIsIk51bWJlckZvcm1hdCIsInN1cGVyY2xhc3MiLCJwcm9wcyIsImNhbGwiLCJ0aGlzIiwiZGVmYXVsdFZhbHVlIiwidmFsaWRhdGVQcm9wcyIsImZvcm1hdHRlZFZhbHVlIiwiZm9ybWF0VmFsdWVQcm9wIiwic3RhdGUiLCJudW1Bc1N0cmluZyIsInJlbW92ZUZvcm1hdHRpbmciLCJtb3VudGVkIiwic2VsZWN0aW9uQmVmb3JlSW5wdXQiLCJiaW5kIiwiX19wcm90b19fIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJjb21wb25lbnREaWRNb3VudCIsInNldFN0YXRlIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwidXBkYXRlVmFsdWVJZlJlcXVpcmVkIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJjbGVhclRpbWVvdXQiLCJmb2N1c1RpbWVvdXQiLCJjYXJldFBvc2l0aW9uVGltZW91dCIsInJlZiIsImZvY3VzZWRFbG0iLCJzdGF0ZVZhbHVlIiwibGFzdE51bVN0ciIsImxhc3RWYWx1ZVdpdGhOZXdGb3JtYXQiLCJmb3JtYXROdW1TdHJpbmciLCJmbG9hdFZhbHVlIiwicGFyc2VGbG9hdCIsImxhc3RGbG9hdFZhbHVlIiwiaXNOYU4iLCJ1cGRhdGVWYWx1ZSIsImlucHV0Iiwic291cmNlIiwiZXZlbnQiLCJnZXRGbG9hdFN0cmluZyIsImRlY2ltYWxTY2FsZSIsImdldFNlcGFyYXRvcnMiLCJudW1SZWdleCIsImdldE51bWJlclJlZ2V4IiwiaGFzTmVnYXRpb24iLCJmaXJzdERlY2ltYWxJbmRleCIsImluZGV4T2YiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJSZWdFeHAiLCJnIiwiaWdub3JlRGVjaW1hbFNlcGFyYXRvciIsImZvcm1hdCIsImN1c3RvbU51bWVyYWxzIiwidW5kZWZpbmVkIiwicmVmJDEiLCJ0aG91c2FuZFNlcGFyYXRvciIsImFsbG93ZWREZWNpbWFsU2VwYXJhdG9ycyIsImdldE1hc2tBdEluZGV4IiwiaW5kZXgiLCJtYXNrIiwiZ2V0VmFsdWVPYmplY3QiLCJFcnJvciIsInRvU3RyaW5nIiwic2V0UGF0Y2hlZENhcmV0UG9zaXRpb24iLCJjdXJyZW50VmFsdWUiLCJzZXRUaW1lb3V0IiwiY29ycmVjdENhcmV0UG9zaXRpb24iLCJkaXJlY3Rpb24iLCJmaXJzdEhhc2hQb3NpdGlvbiIsImxhc3RJbmRleE9mIiwibmV4dFBvcyIsImNhcmV0TGVmdEJvdW5kIiwiY2FyZXRSaWdodEJvdW5kIiwiZ2V0Q2FyZXRQb3NpdGlvbiIsImlucHV0VmFsdWUiLCJqIiwiaW5wdXROdW1iZXIiLCJmb3JtYXR0ZWROdW1iZXIiLCJjdXJyZW50SW5wdXRDaGFyIiwiY3VycmVudEZvcm1hdENoYXIiLCJyZW1vdmVQcmVmaXhBbmRTdWZmaXgiLCJpc05lZ2F0aXZlIiwic3VmZml4TGFzdEluZGV4IiwicmVtb3ZlUGF0dGVybkZvcm1hdHRpbmciLCJmb3JtYXRBcnJheSIsImZpbHRlciIsInN0YXJ0IiwibG4iLCJwYXJ0IiwiZm9ybWF0V2l0aFBhdHRlcm4iLCJoYXNoQ291bnQiLCJmb3JtYXR0ZWROdW1iZXJBcnkiLCJmb3JtYXRBc051bWJlciIsImhhc0RlY2ltYWxTZXBhcmF0b3IiLCJyZWYkMiIsInRob3VzYW5kc0dyb3VwUmVnZXgiLCJnZXRUaG91c2FuZHNHcm91cFJlZ2V4Iiwic2VhcmNoIiwiYXBwbHlUaG91c2FuZFNlcGFyYXRvciIsImN1c3RvbU51bWVyYWxSZWdleCIsImRpZ2l0IiwiaXNOb25OdW1lcmljRmFsc3kiLCJzaWduIiwiY29lZmZpY2llbnQiLCJleHBvbmVudCIsIk51bWJlciIsImRlY2ltYWxJbmRleCIsImNvZmZpZWNpZW50TG4iLCJhYnMiLCJ0b051bWVyaWNTdHJpbmciLCJzaG91ZEhhdmVEZWNpbWFsU2VwYXJhdG9yIiwicm91bmRlZERlY2ltYWxQYXJ0cyIsInRvRml4ZWQiLCJyZXZlcnNlIiwicmVkdWNlIiwicm91bmRlZFN0ciIsImN1cnJlbnQiLCJpZHgiLCJyb3VuZFRvUHJlY2lzaW9uIiwiZm9ybWF0SW5wdXQiLCJmb3JtYXROZWdhdGlvbiIsIm5lZ2F0aW9uUmVnZXgiLCJkb3VibGVOZWdhdGlvblJlZ2V4IiwidGVzdCIsInJlbW92ZU5lZ2F0aW9uIiwiaXNDaGFyYWN0ZXJBRm9ybWF0IiwiY29ycmVjdElucHV0VmFsdWUiLCJsYXN0VmFsdWUiLCJ0aGlzJDEiLCJyZWYkMyIsInByZXZWYWx1ZSIsIm5ld1ZhbHVlIiwicHJldkxlbmd0aCIsIm5ld0xlbmd0aCIsImVuZCIsImZpbmRDaGFuZ2VkSW5kZXgiLCJzZXBhcmF0b3IiLCJzdWJzdHIiLCJsZWZ0Qm91bmQiLCJyaWdodEJvdW5kIiwiZGVsZXRlZFZhbHVlcyIsImNvbmNhdCIsImZpbmQiLCJkZWxldGVkVmFsIiwiZGVsZXRlZFZhbHVlUG9ydGlvbiIsInJlY29yZEluZGV4T2ZGb3JtYXRDaGFyYWN0ZXJzIiwicmVzb2x2ZWRQb3J0aW9uIiwiZm9yRWFjaCIsImN1cnJlbnRQb3J0aW9uIiwicHVzaCIsImtleXMiLCJzcGxpY2UiLCJudW1lcmljU3RyaW5nIiwicmVmJDQiLCJpc0JlZm9yZURlY2ltYWxQb2ludCIsInBhcmFtcyIsImN1cnJlbnRDYXJldFBvc2l0aW9uIiwiZSIsInRhcmdldCIsImlzQ2hhbmdlQWxsb3dlZCIsImZpeExlYWRpbmdaZXJvIiwiZXhwZWN0ZWRDYXJldFBvc2l0aW9uIiwia2V5IiwibmVnYXRpdmVSZWdleCIsImlzUGF0dGVybkZvcm1hdCIsIm5ld0NhcmV0UG9zaXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImlzVW5pdFRlc3RSdW4iLCJjYXJldFBvc2l0aW9uIiwicGVyc2lzdCIsInJlbmRlciIsImN1c3RvbUlucHV0IiwicmVuZGVyVGV4dCIsImdldElucHV0UmVmIiwib3RoZXJQcm9wcyIsIm9iaiIsImV4Y2x1ZGUiLCJrIiwiaGFzT3duUHJvcGVydHkiLCJvYmplY3RXaXRob3V0UHJvcGVydGllcyIsImlucHV0TW9kZSIsIm5hdmlnYXRvciIsInBsYXRmb3JtIiwiYWRkSW5wdXRNb2RlIiwiaW5wdXRQcm9wcyIsImFzc2lnbiIsIkN1c3RvbUlucHV0Il0sInNvdXJjZVJvb3QiOiIifQ==