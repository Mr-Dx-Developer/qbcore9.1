"use strict";(self.webpackChunkgarage=self.webpackChunkgarage||[]).push([[250],{6689:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(5949),a=n(5893);const o=(0,r.Z)([(0,a.jsx)("circle",{cx:"15",cy:"13",r:"1"},"0"),(0,a.jsx)("circle",{cx:"9",cy:"13",r:"1"},"1"),(0,a.jsx)("path",{d:"m8.33 7.5-.66 2h8.66l-.66-2z"},"2"),(0,a.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 15.69c0 .45-.35.81-.78.81h-.44c-.44 0-.78-.36-.78-.81V16.5H7v1.19c0 .45-.35.81-.78.81h-.44c-.43 0-.78-.36-.78-.81v-6.5c.82-2.47 1.34-4.03 1.56-4.69.05-.16.12-.29.19-.4.02-.02.03-.04.05-.06.38-.53.92-.54.92-.54h8.56s.54.01.92.53c.02.03.03.05.05.07.07.11.14.24.19.4.22.66.74 2.23 1.56 4.69v6.5z"},"3")],"Garage")},4121:(e,t,n)=>{n.d(t,{x:()=>l});var r=n(2950),a=n.n(r),o=n(6689),l=function(){return a().createElement(o.Z,{fontSize:"large"})}},9250:(e,t,n)=>{n.r(t),n.d(t,{externalAppConfig:()=>l,default:()=>c});var r=n(4023),a=n(4121),o=n(4274),l=function(){return{id:"garage",nameLocale:"Garage",color:"#fff",backgroundColor:"#333",path:"/garage",icon:a.x,app:r.Z,theme:o.rS}};const c=l},4023:(e,t,n)=>{n.d(t,{Z:()=>v});var r,a,o=n(2950),l=n.n(o),c=n(5475),i=n(6235),s=n(3839),u=n.n(s),d=n(8440),m=n(4810),p=n(5974),f=n(6867),Z=n(2658),x=n(4669),h=n(4958),g=n(7405),E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},E.apply(this,arguments)},b=u().div(w||(r=["\n  flex: 1;\n  padding: 1.5rem;\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n  background-color: #fafafa;\n  ","\n"],a=["\n  flex: 1;\n  padding: 1.5rem;\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n  background-color: #fafafa;\n  ","\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,w=r),(function(e){return e.isDarkMode&&"\n    background-color: #212121;\n  "})),y=function(e){var t=(0,i.useHistory)(),n=(0,o.useState)([]),r=n[0],a=n[1],c=(0,o.useState)(null),s=c[0],u=c[1],E="dark"===e.theme.palette.mode;return(0,o.useEffect)((function(){(0,g.Z)("npwd:qb-garage:getVehicles").then((function(e){a(e.data)}))}),[]),(0,o.useEffect)((function(){if(r){var e=null==r?void 0:r.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{});u(e)}}),[r]),l().createElement(m.Z,{injectFirst:!0},l().createElement(p.Z,{theme:e.theme},l().createElement(b,{isDarkMode:E},l().createElement(d.h,null,l().createElement(f.Z,{color:"primary",onClick:function(){return t.goBack()}},l().createElement(x.Z,null)),l().createElement(Z.Z,{fontSize:24,color:"primary",fontWeight:"bold"},"Garage")),s&&l().createElement(h.Y,{isDarkMode:E,vehicles:s}))))};const v=function(e){return l().createElement(c.NuiProvider,null,l().createElement(y,E({},e)))};var w},4274:(e,t,n)=>{n.d(t,{rS:()=>c});var r=n(3486),a=n(6115),o=r.Z[500],l=a.Z.white,c={palette:{primary:{main:o,dark:r.Z[700],light:r.Z[300],contrastText:l},secondary:{main:"#d32f2f",light:"#eb4242",dark:"#941212",contrastText:l},success:{main:"#2196f3",contrastText:l}}}},9589:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(2950),a=n.n(r),o=n(2440),l=n(799),c=n(700),i=n(4755),s=n(8584),u=n(2658),d=n(6914),m=n(4637),p=n(9308),f=n(2753),Z=n(6024),x=n(7405);const h=function(e){var t=e.veh;return a().createElement(a().Fragment,null,a().createElement(o.Z,{sx:{width:"70%"}},a().createElement(l.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(c.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Location"},a().createElement(p.Z,null))),a().createElement(s.Z,{primary:t.garage})),a().createElement(l.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(c.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Engine"},a().createElement(Z.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.engine/10),"%")})),a().createElement(l.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(c.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Fuel"},a().createElement(f.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.fuel),"%")})),a().createElement(l.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(c.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Body"},a().createElement(m.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.body/10),"%")}))),a().createElement(d.Z,{color:"primary",variant:"contained",disabled:"out"!==t.state,onClick:function(){return e=t.plate,void(0,x.Z)("npwd:qb-garage:requestWaypoint",{plate:e}).then((function(e){console.log(e.data)}));var e}},"Track"))}},4958:(e,t,n)=>{n.d(t,{Y:()=>k});var r=n(1508),a=n(2440),o=n(8277),l=n(2981),c=n(799),i=n(7903),s=n(7425),u=n(6447),d=n(2658),m=n(5092),p=n(5137),f=n(3486),Z=n(265),x=n(7036),h=n(2950),g=n.n(h),E=n(6559),b=n(9521),y=n(4637),v=n(327),w=n(9589),k=function(e){var t=e.vehicles,n=(e.isDarkMode,(0,h.useState)("car")),k=n[0],z=n[1],S={car:{icon:g().createElement(y.Z,{sx:{fontSize:35}}),status:{out:p.Z[500],garaged:f.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},aircraft:{icon:g().createElement(E.Z,{sx:{fontSize:35}}),status:{out:p.Z[500],garaged:f.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},boat:{icon:g().createElement(v.Z,{sx:{fontSize:35}}),status:{out:p.Z[500],garaged:f.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},bike:{icon:g().createElement(b.Z,{sx:{fontSize:35}}),status:{out:p.Z[500],garaged:f.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}}};return g().createElement(r.Z,null,Object.keys(t).map((function(e){return g().createElement(a.Z,{subheader:g().createElement(o.Z,{sx:{cursor:"pointer",position:"static"},onClick:function(){z(e)}},e.toUpperCase())},g().createElement(l.Z,{in:k===e},t[e].map((function(e){return g().createElement(c.ZP,null,g().createElement(i.Z,{sx:{width:"100%",borderBottom:"4px solid",borderBottomColor:S[e.type].status[e.state]}},g().createElement(s.Z,null,g().createElement(r.Z,{sx:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"}},g().createElement(r.Z,{sx:{display:"flex",gap:3,alignItems:"center"}},S[e.type].icon,g().createElement(u.Z,{spacing:1},g().createElement(d.Z,{sx:{fontSize:15}},e.brand+" "+e.vehicle),g().createElement(d.Z,{sx:{fontSize:15}},e.plate))),g().createElement(d.Z,{sx:{fontSize:14}},e.state.toUpperCase()))),g().createElement(m.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},g().createElement(w.Z,{veh:e}))))}))))})))}},8440:(e,t,n)=>{n.d(t,{h:()=>a});var r=n(3839),a=n.n(r)()("div")({width:"100%",justifyContent:"flex-start",display:"flex",alignItems:"center",gap:20,marginBottom:20})},7405:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(5181);const a=function(e,t,n){return a=this,o=void 0,c=function(){var a;return function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(o){switch(o.label){case 0:return a={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},(0,r.Id)()&&n?[2,n]:[4,fetch("https://".concat("npwd_qb_garage","/").concat(e),a)];case 1:return[4,o.sent().json()];case 2:return[2,o.sent()]}}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l((function(e){e(a)}))).then(n,r)}i((c=c.apply(a,o||[])).next())}));var a,o,l,c}},5181:(e,t,n)=>{n.d(t,{Id:()=>r});var r=function(){return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RHFJLEVBQU9ySSxNQUpoREEsYUFBaUIrSCxFQUFJL0gsRUFBUSxJQUFJK0gsR0FBRSxTQUFVRSxHQUFXQSxFQUFRakksT0FJVGdCLEtBQUttSCxFQUFXQyxHQUNsR2QsR0FBTXBCLEVBQVlBLEVBQVV2RyxNQUFNcUcsRUFBU0MsR0FBYyxLQUFLVyxXQU4xQixJQUFVWixFQUFTQyxFQUFZOEIsRUFBRzdCLEksaUNDQXZFLElBQUlvQyxFQUFlLFdBQ3RCLE9BQU8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYXJhZ2UvLi9ub2RlX21vZHVsZXMvQG11aS9pY29ucy1tYXRlcmlhbC9lc20vR2FyYWdlLmpzIiwid2VicGFjazovL2dhcmFnZS8uL2ljb24udHN4Iiwid2VicGFjazovL2dhcmFnZS8uL25wd2QuY29uZmlnLnRzIiwid2VicGFjazovL2dhcmFnZS8uL3NyYy9BcHAudHN4Iiwid2VicGFjazovL2dhcmFnZS8uL3NyYy9hcHAudGhlbWUudHMiLCJ3ZWJwYWNrOi8vZ2FyYWdlLy4vc3JjL2NvbXBvbmVudHMvVmVoaWNsZURldGFpbHMudHN4Iiwid2VicGFjazovL2dhcmFnZS8uL3NyYy9jb21wb25lbnRzL1ZlaGljbGVMaXN0LnRzeCIsIndlYnBhY2s6Ly9nYXJhZ2UvLi9zcmMvc3R5bGVzL2hlYWRlci5zdHlsZXMudHMiLCJ3ZWJwYWNrOi8vZ2FyYWdlLy4vc3JjL3V0aWxzL2ZldGNoTnVpLnRzIiwid2VicGFjazovL2dhcmFnZS8uL3NyYy91dGlscy9taXNjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcmVhdGVTdmdJY29uIGZyb20gJy4vdXRpbHMvY3JlYXRlU3ZnSWNvbic7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU3ZnSWNvbihbLyojX19QVVJFX18qL19qc3goXCJjaXJjbGVcIiwge1xuICBjeDogXCIxNVwiLFxuICBjeTogXCIxM1wiLFxuICByOiBcIjFcIlxufSwgXCIwXCIpLCAvKiNfX1BVUkVfXyovX2pzeChcImNpcmNsZVwiLCB7XG4gIGN4OiBcIjlcIixcbiAgY3k6IFwiMTNcIixcbiAgcjogXCIxXCJcbn0sIFwiMVwiKSwgLyojX19QVVJFX18qL19qc3goXCJwYXRoXCIsIHtcbiAgZDogXCJtOC4zMyA3LjUtLjY2IDJoOC42NmwtLjY2LTJ6XCJcbn0sIFwiMlwiKSwgLyojX19QVVJFX18qL19qc3goXCJwYXRoXCIsIHtcbiAgZDogXCJNMjAgMkg0Yy0xLjEgMC0yIC45LTIgMnYxNmMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6bS0xIDE1LjY5YzAgLjQ1LS4zNS44MS0uNzguODFoLS40NGMtLjQ0IDAtLjc4LS4zNi0uNzgtLjgxVjE2LjVIN3YxLjE5YzAgLjQ1LS4zNS44MS0uNzguODFoLS40NGMtLjQzIDAtLjc4LS4zNi0uNzgtLjgxdi02LjVjLjgyLTIuNDcgMS4zNC00LjAzIDEuNTYtNC42OS4wNS0uMTYuMTItLjI5LjE5LS40LjAyLS4wMi4wMy0uMDQuMDUtLjA2LjM4LS41My45Mi0uNTQuOTItLjU0aDguNTZzLjU0LjAxLjkyLjUzYy4wMi4wMy4wMy4wNS4wNS4wNy4wNy4xMS4xNC4yNC4xOS40LjIyLjY2Ljc0IDIuMjMgMS41NiA0LjY5djYuNXpcIlxufSwgXCIzXCIpXSwgJ0dhcmFnZScpOyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBHYXJhZ2UgfSBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsJztcbmV4cG9ydCB2YXIgR2FyYWdlSWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChHYXJhZ2UsIHsgZm9udFNpemU6IFwibGFyZ2VcIiB9KTtcbn07XG4iLCJpbXBvcnQgQXBwIGZyb20gJy4vc3JjL0FwcCc7XG5pbXBvcnQgeyBHYXJhZ2VJY29uIH0gZnJvbSAnLi9pY29uJztcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSAnLi9zcmMvYXBwLnRoZW1lJztcbmV4cG9ydCB2YXIgZXh0ZXJuYWxBcHBDb25maWcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIGlkOiAnZ2FyYWdlJyxcbiAgICBuYW1lTG9jYWxlOiAnR2FyYWdlJyxcbiAgICBjb2xvcjogJyNmZmYnLFxuICAgIGJhY2tncm91bmRDb2xvcjogJyMzMzMnLFxuICAgIHBhdGg6ICcvZ2FyYWdlJyxcbiAgICBpY29uOiBHYXJhZ2VJY29uLFxuICAgIGFwcDogQXBwLFxuICAgIHRoZW1lOiB0aGVtZSxcbn0pOyB9O1xuZXhwb3J0IGRlZmF1bHQgZXh0ZXJuYWxBcHBDb25maWc7XG4iLCJ2YXIgX19tYWtlVGVtcGxhdGVPYmplY3QgPSAodGhpcyAmJiB0aGlzLl9fbWFrZVRlbXBsYXRlT2JqZWN0KSB8fCBmdW5jdGlvbiAoY29va2VkLCByYXcpIHtcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxuICAgIHJldHVybiBjb29rZWQ7XG59O1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgTnVpUHJvdmlkZXIgfSBmcm9tICdyZWFjdC1maXZlbS1ob29rcyc7XG5pbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJy4vc3R5bGVzL2hlYWRlci5zdHlsZXMnO1xuaW1wb3J0IHsgSWNvbkJ1dHRvbiwgU3R5bGVkRW5naW5lUHJvdmlkZXIsIFRoZW1lUHJvdmlkZXIsIFR5cG9ncmFwaHkgfSBmcm9tICdAbXVpL21hdGVyaWFsJztcbmltcG9ydCB7IEFycm93QmFjayB9IGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwnO1xuaW1wb3J0IHsgVmVoaWNsZUxpc3QgfSBmcm9tICcuL2NvbXBvbmVudHMvVmVoaWNsZUxpc3QnO1xuaW1wb3J0IGZldGNoTnVpIGZyb20gJy4vdXRpbHMvZmV0Y2hOdWknO1xudmFyIENvbnRhaW5lciA9IHN0eWxlZC5kaXYodGVtcGxhdGVPYmplY3RfMSB8fCAodGVtcGxhdGVPYmplY3RfMSA9IF9fbWFrZVRlbXBsYXRlT2JqZWN0KFtcIlxcbiAgZmxleDogMTtcXG4gIHBhZGRpbmc6IDEuNXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIG92ZXJmbG93OiBhdXRvO1xcbiAgbWF4LWhlaWdodDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7XFxuICBcIiwgXCJcXG5cIl0sIFtcIlxcbiAgZmxleDogMTtcXG4gIHBhZGRpbmc6IDEuNXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIG92ZXJmbG93OiBhdXRvO1xcbiAgbWF4LWhlaWdodDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7XFxuICBcIiwgXCJcXG5cIl0pKSwgZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGlzRGFya01vZGUgPSBfYS5pc0RhcmtNb2RlO1xuICAgIHJldHVybiBpc0RhcmtNb2RlICYmXG4gICAgICAgIFwiXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyMTIxMjE7XFxuICBcIjtcbn0pO1xudmFyIEFwcCA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpO1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKFtdKSwgdmVoaWNsZXMgPSBfYVswXSwgc2V0VmVoaWNsZXMgPSBfYVsxXTtcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZShudWxsKSwgbWFwcGVkVmVoID0gX2JbMF0sIHNldE1hcHBlZFZlaCA9IF9iWzFdO1xuICAgIHZhciBpc0RhcmtNb2RlID0gcHJvcHMudGhlbWUucGFsZXR0ZS5tb2RlID09PSAnZGFyayc7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZmV0Y2hOdWkoJ25wd2Q6cWItZ2FyYWdlOmdldFZlaGljbGVzJykudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgICAgc2V0VmVoaWNsZXMocmVzcC5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSwgW10pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2ZWhpY2xlcykge1xuICAgICAgICAgICAgdmFyIG1hcHBlZFZlaGljbGVzID0gdmVoaWNsZXMgPT09IG51bGwgfHwgdmVoaWNsZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZlaGljbGVzLnJlZHVjZShmdW5jdGlvbiAodmVocywgdmVoaWNsZSkge1xuICAgICAgICAgICAgICAgIGlmICghdmVoc1t2ZWhpY2xlLnR5cGVdKVxuICAgICAgICAgICAgICAgICAgICB2ZWhzW3ZlaGljbGUudHlwZV0gPSBbXTtcbiAgICAgICAgICAgICAgICB2ZWhzW3ZlaGljbGUudHlwZV0ucHVzaCh2ZWhpY2xlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVocztcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIHNldE1hcHBlZFZlaChtYXBwZWRWZWhpY2xlcyk7XG4gICAgICAgIH1cbiAgICB9LCBbdmVoaWNsZXNdKTtcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkRW5naW5lUHJvdmlkZXIsIHsgaW5qZWN0Rmlyc3Q6IHRydWUgfSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUaGVtZVByb3ZpZGVyLCB7IHRoZW1lOiBwcm9wcy50aGVtZSB9LFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb250YWluZXIsIHsgaXNEYXJrTW9kZTogaXNEYXJrTW9kZSB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSGVhZGVyLCBudWxsLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEljb25CdXR0b24sIHsgY29sb3I6IFwicHJpbWFyeVwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBoaXN0b3J5LmdvQmFjaygpOyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEFycm93QmFjaywgbnVsbCkpLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgZm9udFNpemU6IDI0LCBjb2xvcjogXCJwcmltYXJ5XCIsIGZvbnRXZWlnaHQ6IFwiYm9sZFwiIH0sIFwiR2FyYWdlXCIpKSxcbiAgICAgICAgICAgICAgICBtYXBwZWRWZWggJiYgUmVhY3QuY3JlYXRlRWxlbWVudChWZWhpY2xlTGlzdCwgeyBpc0RhcmtNb2RlOiBpc0RhcmtNb2RlLCB2ZWhpY2xlczogbWFwcGVkVmVoIH0pKSkpKTtcbn07XG52YXIgV2l0aFByb3ZpZGVycyA9IGZ1bmN0aW9uIChwcm9wcykgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTnVpUHJvdmlkZXIsIG51bGwsXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChBcHAsIF9fYXNzaWduKHt9LCBwcm9wcykpKSk7IH07XG5leHBvcnQgZGVmYXVsdCBXaXRoUHJvdmlkZXJzO1xudmFyIHRlbXBsYXRlT2JqZWN0XzE7XG4iLCJpbXBvcnQgeyBjb21tb24sIGdyZWVuIH0gZnJvbSAnQG11aS9tYXRlcmlhbC9jb2xvcnMnO1xuZXhwb3J0IHZhciBBUFBfUFJJTUFSWV9DT0xPUiA9IGdyZWVuWzUwMF07XG5leHBvcnQgdmFyIEFQUF9URVhUX0NPTE9SID0gY29tbW9uLndoaXRlO1xuZXhwb3J0IHZhciB0aGVtZSA9IHtcbiAgICBwYWxldHRlOiB7XG4gICAgICAgIHByaW1hcnk6IHtcbiAgICAgICAgICAgIG1haW46IEFQUF9QUklNQVJZX0NPTE9SLFxuICAgICAgICAgICAgZGFyazogZ3JlZW5bNzAwXSxcbiAgICAgICAgICAgIGxpZ2h0OiBncmVlblszMDBdLFxuICAgICAgICAgICAgY29udHJhc3RUZXh0OiBBUFBfVEVYVF9DT0xPUixcbiAgICAgICAgfSxcbiAgICAgICAgc2Vjb25kYXJ5OiB7XG4gICAgICAgICAgICBtYWluOiAnI2QzMmYyZicsXG4gICAgICAgICAgICBsaWdodDogJyNlYjQyNDInLFxuICAgICAgICAgICAgZGFyazogJyM5NDEyMTInLFxuICAgICAgICAgICAgY29udHJhc3RUZXh0OiBBUFBfVEVYVF9DT0xPUixcbiAgICAgICAgfSxcbiAgICAgICAgc3VjY2Vzczoge1xuICAgICAgICAgICAgbWFpbjogJyMyMTk2ZjMnLFxuICAgICAgICAgICAgY29udHJhc3RUZXh0OiBBUFBfVEVYVF9DT0xPUixcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBCdXR0b24sIExpc3QsIExpc3RJdGVtLCBMaXN0SXRlbUljb24sIExpc3RJdGVtVGV4dCwgVG9vbHRpcCwgVHlwb2dyYXBoeSwgfSBmcm9tICdAbXVpL21hdGVyaWFsJztcbmltcG9ydCBEaXJlY3Rpb25zQ2FySWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0RpcmVjdGlvbnNDYXInO1xuaW1wb3J0IExvY2F0aW9uT25JY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvTG9jYXRpb25Pbic7XG5pbXBvcnQgTG9jYWxHYXNTdGF0aW9uSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0xvY2FsR2FzU3RhdGlvbic7XG5pbXBvcnQgQnVpbGRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvQnVpbGQnO1xuaW1wb3J0IGZldGNoTnVpIGZyb20gJy4uL3V0aWxzL2ZldGNoTnVpJztcbnZhciBWZWhpY2xlRGV0YWlscyA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciB2ZWggPSBfYS52ZWg7XG4gICAgdmFyIGhhbmRsZVRyYWNrVmVoaWNsZSA9IGZ1bmN0aW9uIChwbGF0ZSkge1xuICAgICAgICBmZXRjaE51aSgnbnB3ZDpxYi1nYXJhZ2U6cmVxdWVzdFdheXBvaW50JywgeyBwbGF0ZTogcGxhdGUgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3QsIHsgc3g6IHsgd2lkdGg6ICc3MCUnIH0gfSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW0sIHsgZGlzYWJsZVBhZGRpbmc6IHRydWUsIHN4OiB7IGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB3aGl0ZScsIG1iOiAnOHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbUljb24sIHsgc3g6IHsgbWw6ICc1cHgnLCBtcjogJzIwcHgnLCBtaW5XaWR0aDogJzI1cHgnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7IHRpdGxlOiBcIkxvY2F0aW9uXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9jYXRpb25Pbkljb24sIG51bGwpKSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbVRleHQsIHsgcHJpbWFyeTogdmVoLmdhcmFnZSB9KSksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCB7IGRpc2FibGVQYWRkaW5nOiB0cnVlLCBzeDogeyBib3JkZXJCb3R0b206ICcxcHggc29saWQgd2hpdGUnLCBtYjogJzhweCcgfSB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1JY29uLCB7IHN4OiB7IG1sOiAnNXB4JywgbXI6ICcyMHB4JywgbWluV2lkdGg6ICcyNXB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgeyB0aXRsZTogXCJFbmdpbmVcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdWlsZEljb24sIG51bGwpKSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbVRleHQsIHsgcHJpbWFyeTogUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5jZWlsKHZlaC5lbmdpbmUgLyAxMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiVcIikgfSkpLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbSwgeyBkaXNhYmxlUGFkZGluZzogdHJ1ZSwgc3g6IHsgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHdoaXRlJywgbWI6ICc4cHgnIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtSWNvbiwgeyBzeDogeyBtbDogJzVweCcsIG1yOiAnMjBweCcsIG1pbldpZHRoOiAnMjVweCcgfSB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsgdGl0bGU6IFwiRnVlbFwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExvY2FsR2FzU3RhdGlvbkljb24sIG51bGwpKSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbVRleHQsIHsgcHJpbWFyeTogUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5jZWlsKHZlaC5mdWVsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJVwiKSB9KSksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCB7IGRpc2FibGVQYWRkaW5nOiB0cnVlLCBzeDogeyBib3JkZXJCb3R0b206ICcxcHggc29saWQgd2hpdGUnLCBtYjogJzhweCcgfSB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1JY29uLCB7IHN4OiB7IG1sOiAnNXB4JywgbXI6ICcyMHB4JywgbWluV2lkdGg6ICcyNXB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgeyB0aXRsZTogXCJCb2R5XCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGlyZWN0aW9uc0Nhckljb24sIG51bGwpKSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbVRleHQsIHsgcHJpbWFyeTogUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5jZWlsKHZlaC5ib2R5IC8gMTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCIlXCIpIH0pKSksXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7IGNvbG9yOiBcInByaW1hcnlcIiwgdmFyaWFudDogXCJjb250YWluZWRcIiwgZGlzYWJsZWQ6IHZlaC5zdGF0ZSAhPT0gJ291dCcsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGhhbmRsZVRyYWNrVmVoaWNsZSh2ZWgucGxhdGUpOyB9IH0sIFwiVHJhY2tcIikpKTtcbn07XG5leHBvcnQgZGVmYXVsdCBWZWhpY2xlRGV0YWlscztcbiIsImltcG9ydCB7IEJveCwgTGlzdEl0ZW0sIExpc3QsIExpc3RTdWJoZWFkZXIsIENvbGxhcHNlLCBBY2NvcmRpb24sIEFjY29yZGlvblN1bW1hcnksIFR5cG9ncmFwaHksIEFjY29yZGlvbkRldGFpbHMsIFN0YWNrLCB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xuaW1wb3J0IHsgZ3JlZW4sIGdyZXksIG9yYW5nZSwgcmVkIH0gZnJvbSAnQG11aS9tYXRlcmlhbC9jb2xvcnMnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZsaWdodEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9GbGlnaHQnO1xuaW1wb3J0IFBlZGFsQmlrZUljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9QZWRhbEJpa2UnO1xuaW1wb3J0IERpcmVjdGlvbnNDYXJJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvRGlyZWN0aW9uc0Nhcic7XG5pbXBvcnQgRGlyZWN0aW9uc0JvYXRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvRGlyZWN0aW9uc0JvYXQnO1xuaW1wb3J0IFZlaGljbGVEZXRhaWxzIGZyb20gJy4vVmVoaWNsZURldGFpbHMnO1xuZXhwb3J0IHZhciBWZWhpY2xlTGlzdCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciB2ZWhpY2xlcyA9IF9hLnZlaGljbGVzLCBpc0RhcmtNb2RlID0gX2EuaXNEYXJrTW9kZTtcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZSgnY2FyJyksIGNvbGxhcHNlSWQgPSBfYlswXSwgc2V0Q29sbGFwc2VJZCA9IF9iWzFdO1xuICAgIHZhciB0eXBlSWNvbiA9IHtcbiAgICAgICAgY2FyOiB7XG4gICAgICAgICAgICBpY29uOiBSZWFjdC5jcmVhdGVFbGVtZW50KERpcmVjdGlvbnNDYXJJY29uLCB7IHN4OiB7IGZvbnRTaXplOiAzNSB9IH0pLFxuICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgICAgb3V0OiBvcmFuZ2VbNTAwXSxcbiAgICAgICAgICAgICAgICBnYXJhZ2VkOiBncmVlbls1MDBdLFxuICAgICAgICAgICAgICAgIGltcG91bmRlZDogcmVkWzUwMF0sXG4gICAgICAgICAgICAgICAgc2VpemVkOiByZWRbNTAwXSxcbiAgICAgICAgICAgICAgICB1bmtub3duOiBncmV5WzUwMF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBhaXJjcmFmdDoge1xuICAgICAgICAgICAgaWNvbjogUmVhY3QuY3JlYXRlRWxlbWVudChGbGlnaHRJY29uLCB7IHN4OiB7IGZvbnRTaXplOiAzNSB9IH0pLFxuICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgICAgb3V0OiBvcmFuZ2VbNTAwXSxcbiAgICAgICAgICAgICAgICBnYXJhZ2VkOiBncmVlbls1MDBdLFxuICAgICAgICAgICAgICAgIGltcG91bmRlZDogcmVkWzUwMF0sXG4gICAgICAgICAgICAgICAgc2VpemVkOiByZWRbNTAwXSxcbiAgICAgICAgICAgICAgICB1bmtub3duOiBncmV5WzUwMF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBib2F0OiB7XG4gICAgICAgICAgICBpY29uOiBSZWFjdC5jcmVhdGVFbGVtZW50KERpcmVjdGlvbnNCb2F0SWNvbiwgeyBzeDogeyBmb250U2l6ZTogMzUgfSB9KSxcbiAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICAgIG91dDogb3JhbmdlWzUwMF0sXG4gICAgICAgICAgICAgICAgZ2FyYWdlZDogZ3JlZW5bNTAwXSxcbiAgICAgICAgICAgICAgICBpbXBvdW5kZWQ6IHJlZFs1MDBdLFxuICAgICAgICAgICAgICAgIHNlaXplZDogcmVkWzUwMF0sXG4gICAgICAgICAgICAgICAgdW5rbm93bjogZ3JleVs1MDBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYmlrZToge1xuICAgICAgICAgICAgaWNvbjogUmVhY3QuY3JlYXRlRWxlbWVudChQZWRhbEJpa2VJY29uLCB7IHN4OiB7IGZvbnRTaXplOiAzNSB9IH0pLFxuICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgICAgb3V0OiBvcmFuZ2VbNTAwXSxcbiAgICAgICAgICAgICAgICBnYXJhZ2VkOiBncmVlbls1MDBdLFxuICAgICAgICAgICAgICAgIGltcG91bmRlZDogcmVkWzUwMF0sXG4gICAgICAgICAgICAgICAgc2VpemVkOiByZWRbNTAwXSxcbiAgICAgICAgICAgICAgICB1bmtub3duOiBncmV5WzUwMF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG4gICAgdmFyIGV4cGFuZEl0ZW0gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgc2V0Q29sbGFwc2VJZChpZCk7XG4gICAgfTtcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQm94LCBudWxsLCBPYmplY3Qua2V5cyh2ZWhpY2xlcykubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KExpc3QsIHsgc3ViaGVhZGVyOiBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RTdWJoZWFkZXIsIHsgc3g6IHsgY3Vyc29yOiAncG9pbnRlcicsIHBvc2l0aW9uOiBcInN0YXRpY1wiIH0sIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4cGFuZEl0ZW0oa2V5KTsgfSB9LCBrZXkudG9VcHBlckNhc2UoKSkgfSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb2xsYXBzZSwgeyBpbjogY29sbGFwc2VJZCA9PT0ga2V5IH0sIHZlaGljbGVzW2tleV0ubWFwKGZ1bmN0aW9uICh2ZWgpIHtcbiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbSwgbnVsbCxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEFjY29yZGlvbiwgeyBzeDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbTogJzRweCBzb2xpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b21Db2xvcjogdHlwZUljb25bdmVoLnR5cGVdLnN0YXR1c1t2ZWguc3RhdGVdLFxuICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWNjb3JkaW9uU3VtbWFyeSwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQm94LCB7IHN4OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQm94LCB7IHN4OiB7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAzLCBhbGlnbkl0ZW1zOiAnY2VudGVyJyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVJY29uW3ZlaC50eXBlXS5pY29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFN0YWNrLCB7IHNwYWNpbmc6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHlwb2dyYXBoeSwgeyBzeDogeyBmb250U2l6ZTogMTUgfSB9LCB2ZWguYnJhbmQgKyAnICcgKyB2ZWgudmVoaWNsZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgc3g6IHsgZm9udFNpemU6IDE1IH0gfSwgdmVoLnBsYXRlKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHlwb2dyYXBoeSwgeyBzeDogeyBmb250U2l6ZTogMTQgfSB9LCB2ZWguc3RhdGUudG9VcHBlckNhc2UoKSkpKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2NvcmRpb25EZXRhaWxzLCB7IHN4OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVmVoaWNsZURldGFpbHMsIHsgdmVoOiB2ZWggfSkpKSkpO1xuICAgICAgICB9KSkpKTsgfSkpKTtcbn07XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gXCJzdHlsZWQtY29tcG9uZW50c1wiO1xuZXhwb3J0IHZhciBIZWFkZXIgPSBzdHlsZWQoJ2RpdicpKHtcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1zdGFydCcsXG4gICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIGdhcDogMjAsXG4gICAgbWFyZ2luQm90dG9tOiAyMCxcbn0pO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbi8qKlxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIGZldGNoIEFQSSB0YWlsb3JlZCBmb3IgQ0VGL05VSSB1c2UuXG4gKiBAcGFyYW0gZXZlbnROYW1lIC0gVGhlIGVuZHBvaW50IGV2ZW50bmFtZSB0byB0YXJnZXRcbiAqIEBwYXJhbSBkYXRhIC0gRGF0YSB5b3Ugd2lzaCB0byBzZW5kIGluIHRoZSBOVUkgQ2FsbGJhY2tcbiAqXG4gKiBAcmV0dXJuIHJldHVybkRhdGEgLSBBIHByb21pc2UgZm9yIHRoZSBkYXRhIHNlbnQgYmFjayBieSB0aGUgTnVpQ2FsbGJhY2tzIENCIGFyZ3VtZW50XG4gKi9cbmltcG9ydCB7IGlzRW52QnJvd3NlciB9IGZyb20gJy4vbWlzYyc7XG5mdW5jdGlvbiBmZXRjaE51aShldmVudE5hbWUsIGRhdGEsIG1vY2tSZXNwKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzb3VyY2VOYW1lLCByZXNwLCByZXNwb25zZU9iajtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0VudkJyb3dzZXIoKSAmJiBtb2NrUmVzcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG1vY2tSZXNwXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZU5hbWUgPSBcIm5wd2RfcWJfZ2FyYWdlXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKFwiaHR0cHM6Ly9cIi5jb25jYXQocmVzb3VyY2VOYW1lLCBcIi9cIikuY29uY2F0KGV2ZW50TmFtZSksIG9wdGlvbnMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3AgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3AuanNvbigpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlT2JqID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VPYmpdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IGZldGNoTnVpO1xuIiwiZXhwb3J0IHZhciBpc0VudkJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmICF3aW5kb3cuaW52b2tlTmF0aXZlO1xufTtcbmV4cG9ydCB2YXIgZ2V0UmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3aW5kb3cuR2V0UGFyZW50UmVzb3VyY2VOYW1lID8gd2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93LkdldFBhcmVudFJlc291cmNlTmFtZSgpIDogJ25wd2QnO1xufTtcbmV4cG9ydCB2YXIgYnVpbGRSZXNwT2JqID0gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgZXJyb3JNc2cpIHsgcmV0dXJuICh7XG4gICAgZGF0YTogZGF0YSxcbiAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICBlcnJvck1zZzogZXJyb3JNc2csXG59KTsgfTtcbiJdLCJuYW1lcyI6WyJjeCIsImN5IiwiciIsImQiLCJHYXJhZ2VJY29uIiwiZm9udFNpemUiLCJleHRlcm5hbEFwcENvbmZpZyIsImlkIiwibmFtZUxvY2FsZSIsImNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwicGF0aCIsImljb24iLCJhcHAiLCJ0aGVtZSIsImNvb2tlZCIsInJhdyIsIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsInRoaXMiLCJDb250YWluZXIiLCJ0ZW1wbGF0ZU9iamVjdF8xIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9hIiwiaXNEYXJrTW9kZSIsIkFwcCIsInByb3BzIiwiaGlzdG9yeSIsInVzZUhpc3RvcnkiLCJ1c2VTdGF0ZSIsInZlaGljbGVzIiwic2V0VmVoaWNsZXMiLCJfYiIsIm1hcHBlZFZlaCIsInNldE1hcHBlZFZlaCIsInBhbGV0dGUiLCJtb2RlIiwidXNlRWZmZWN0IiwidGhlbiIsInJlc3AiLCJkYXRhIiwibWFwcGVkVmVoaWNsZXMiLCJyZWR1Y2UiLCJ2ZWhzIiwidmVoaWNsZSIsInR5cGUiLCJwdXNoIiwiaW5qZWN0Rmlyc3QiLCJvbkNsaWNrIiwiZ29CYWNrIiwiZm9udFdlaWdodCIsIk51aVByb3ZpZGVyIiwiQVBQX1BSSU1BUllfQ09MT1IiLCJBUFBfVEVYVF9DT0xPUiIsInByaW1hcnkiLCJtYWluIiwiZGFyayIsImxpZ2h0IiwiY29udHJhc3RUZXh0Iiwic2Vjb25kYXJ5Iiwic3VjY2VzcyIsInZlaCIsInN4Iiwid2lkdGgiLCJkaXNhYmxlUGFkZGluZyIsImJvcmRlckJvdHRvbSIsIm1iIiwibWwiLCJtciIsIm1pbldpZHRoIiwidGl0bGUiLCJnYXJhZ2UiLCJNYXRoIiwiY2VpbCIsImVuZ2luZSIsImZ1ZWwiLCJib2R5IiwidmFyaWFudCIsImRpc2FibGVkIiwic3RhdGUiLCJwbGF0ZSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJWZWhpY2xlTGlzdCIsImNvbGxhcHNlSWQiLCJzZXRDb2xsYXBzZUlkIiwidHlwZUljb24iLCJjYXIiLCJzdGF0dXMiLCJvdXQiLCJnYXJhZ2VkIiwiaW1wb3VuZGVkIiwic2VpemVkIiwidW5rbm93biIsImFpcmNyYWZ0IiwiYm9hdCIsImJpa2UiLCJrZXlzIiwibWFwIiwia2V5Iiwic3ViaGVhZGVyIiwiY3Vyc29yIiwicG9zaXRpb24iLCJ0b1VwcGVyQ2FzZSIsImluIiwiYm9yZGVyQm90dG9tQ29sb3IiLCJkaXNwbGF5IiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiZ2FwIiwic3BhY2luZyIsImJyYW5kIiwiZmxleERpcmVjdGlvbiIsIkhlYWRlciIsIm1hcmdpbkJvdHRvbSIsImV2ZW50TmFtZSIsIm1vY2tSZXNwIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJvcHRpb25zIiwiZiIsInkiLCJnIiwiXyIsImxhYmVsIiwic2VudCIsInRyeXMiLCJvcHMiLCJuZXh0IiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidiIsIm9wIiwiVHlwZUVycm9yIiwiZG9uZSIsInBvcCIsImUiLCJzdGVwIiwiX19nZW5lcmF0b3IiLCJtZXRob2QiLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImZldGNoIiwiY29uY2F0IiwianNvbiIsIlAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInJlamVjdGVkIiwicmVzdWx0IiwiaXNFbnZCcm93c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==